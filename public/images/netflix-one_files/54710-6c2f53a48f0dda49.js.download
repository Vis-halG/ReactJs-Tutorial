(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[54710],{26506:function(n,e,t){"use strict";var r,i=t(67294),o=["title","titleId"];function a(){return a=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},a.apply(null,arguments)}var s=function(n,e){var t=n.title,s=n.titleId,c=function(n,e){if(null==n)return{};var t,r,i=function(n,e){if(null==n)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(-1!==e.indexOf(r))continue;t[r]=n[r]}return t}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)t=o[r],-1===e.indexOf(t)&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}(n,o);return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:e,"aria-labelledby":s},c),t?i.createElement("title",{id:s},t):null,r||(r=i.createElement("path",{fill:"#fff",d:"M11.636 19.636c4.424 0 8-3.576 8-8s-3.576-8-8-8-8 3.577-8 8c0 4.424 3.577 8 8 8m-1.13-12.204c0-.596.534-1.129 1.13-1.129s1.13.533 1.13 1.13v3.356c0 .596-.534 1.13-1.13 1.13s-1.13-.47-1.13-1.13zm1.13 6.118c.596 0 1.13.533 1.13 1.13s-.534 1.129-1.13 1.129-1.13-.533-1.13-1.13.534-1.129 1.13-1.129"})))},c=(0,i.forwardRef)(s),l=(0,i.memo)(c);e.Z=l},7352:function(n,e,t){"use strict";var r=t(26042),i=t(69396),o=t(7297),a=t(85893),s=(t(67294),t(87379)),c=t(19880),l=t(90908),u=t(59246),d=t(24043),v=t(58538),f=t(10507),h=t(53984),p=t(37688),g=t(29237),w=t(17214),m=t(6150);function Z(){var n=(0,o.Z)(["\n  grid-area: poster;\n  display: flex;\n  flex-direction: column;\n"]);return Z=function(){return n},n}function b(){var n=(0,o.Z)(["\n  margin-bottom: 8px;\n  border-radius: 4px;\n"]);return b=function(){return n},n}function x(){var n=(0,o.Z)(["\n  ","\n  color: ",";\n\n  &:hover,\n  &:focus {\n    color: ",";\n  }\n"]);return x=function(){return n},n}function C(){var n=(0,o.Z)(["\n  grid-area: title;\n  gap: 8px;\n  align-items: center;\n"]);return C=function(){return n},n}function E(){var n=(0,o.Z)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  min-width: 0;\n  white-space: nowrap;\n  flex-basis: max-content;\n  ","\n  color: ",";\n\n  &:hover,\n  &:focus {\n    color: ",";\n  }\n"]);return E=function(){return n},n}function I(){var n=(0,o.Z)(["\n  ","\n  color: ",";\n  background: ",";\n  border-radius: 20px;\n  width: 3.5em;\n  text-align: center;\n  height: fit-content;\n  flex-shrink: 0;\n"]);return I=function(){return n},n}function R(){var n=(0,o.Z)(["\n  &:before {\n    font-size: 0.5em;\n    position: relative;\n    bottom: 0.35em;\n  }\n"]);return R=function(){return n},n}function P(){var n=(0,o.Z)(["\n  grid-area: avatar;\n  "," /* so that size of avatar scales with ReviewContentRating */\n  margin-top: 8px;\n  margin-bottom: 20px;\n\n  "," {\n    display: none;\n  }\n"]);return P=function(){return n},n}function _(){var n=(0,o.Z)(["\n  display: block;\n  position: relative;\n\n  div:hover {\n    transform: none;\n    box-shadow: none;\n  }\n"]);return _=function(){return n},n}function A(){var n=(0,o.Z)(["\n  position: absolute;\n  bottom: -4px;\n"]);return A=function(){return n},n}function T(){var n=(0,o.Z)(["\n  grid-area: username;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  min-width: 0;\n  max-width: 100%;\n  ","\n  color: ",";\n  width: fit-content; /* to prevent clickable area from stretching too much */\n  position: relative;\n  align-self: center;\n\n  &:hover,\n  &:focus {\n    color: ",";\n  }\n"]);return T=function(){return n},n}function y(){var n=(0,o.Z)(["\n  grid-area: reviewInfo;\n"]);return y=function(){return n},n}function k(){var n=(0,o.Z)(["\n  ","\n  display: inline-flex;\n  color: ",";\n"]);return k=function(){return n},n}function S(){var n=(0,o.Z)(["\n  display: flex;\n  margin-bottom: 0;\n  order: 1;\n  grid-area: actions;\n\n  justify-content: flex-end;\n  "," {\n    order: 0;\n    margin-top: 20px;\n  }\n"]);return S=function(){return n},n}function j(){var n=(0,o.Z)(["\n  grid-area: content;\n"]);return j=function(){return n},n}function O(){var n=(0,o.Z)(["\n  grid-area: content;\n  ","\n  flex-basis: 100%;\n  width: 100%;\n  span {\n    line-height: 1.8;\n    white-space: pre-line;\n    overflow-wrap: break-word;\n  }\n"]);return O=function(){return n},n}function N(){var n=(0,o.Z)(["\n          grid-template-areas:\n            'poster avatar username actions'\n            'poster avatar reviewInfo actions'\n            'poster content content content'\n            'poster content content content'\n            '. content content content';\n\n          grid-template-rows: minmax(0, auto) minmax(0, auto) 1fr auto;\n          grid-template-columns: 178px auto 2fr auto;\n          column-gap: 16px;\n\n          "," {\n            display: none;\n          }\n        "]);return N=function(){return n},n}function L(){var n=(0,o.Z)(["\n          grid-template-areas:\n            'avatar username actions'\n            'avatar reviewInfo actions'\n            'content content content'\n            'content content content'\n            'content content content';\n\n          grid-template-rows: minmax(0, auto) minmax(0, auto) 1fr auto;\n          grid-template-columns: auto 1fr 1fr;\n          column-gap: 16px;\n\n          ",",\n          "," {\n            display: none;\n          }\n        "]);return L=function(){return n},n}function B(){var n=(0,o.Z)(["\n            grid-template-areas:\n              'poster title'\n              'poster reviewInfo'\n              'content content'\n              'actions actions';\n            grid-template-rows: minmax(0, auto) minmax(0, auto) 1fr;\n            grid-template-columns: 105px minmax(0, 1fr);\n\n            "," {\n              display: flex;\n            }\n\n            ",",\n            ",",\n            "," {\n              display: none;\n            }\n\n            ",",\n            "," {\n              padding-top: 16px;\n            }\n          "]);return B=function(){return n},n}function D(){var n=(0,o.Z)(["\n            grid-template-areas:\n              'avatar username'\n              'avatar reviewInfo'\n              'content content'\n              'actions actions';\n            grid-template-rows: minmax(0, auto) minmax(0, auto) 1fr;\n            grid-template-columns: auto minmax(0, 1fr);\n\n            ",",\n            "," {\n              display: none;\n            }\n\n            ",",\n            "," {\n              display: block;\n            }\n          "]);return D=function(){return n},n}function F(){var n=(0,o.Z)(["\n  display: grid;\n  margin: 24px 0;\n  ","\n\n  "," {\n    ","\n  }\n"]);return F=function(){return n},n}var U=s.ZP.a.withConfig({componentId:"sc-e25bebe0-0"})(Z()),V=(0,s.ZP)(d.e).withConfig({componentId:"sc-e25bebe0-1"})(b()),z=s.ZP.span.withConfig({componentId:"sc-e25bebe0-2"})(x(),v.ZT.sPlain,(function(n){return n.theme.colors.contentsSecondary}),(function(n){return n.theme.colors.contentsPrimary})),M=s.ZP.div.withConfig({componentId:"sc-e25bebe0-3"})(C()),G=s.ZP.a.withConfig({componentId:"sc-e25bebe0-4"})(E(),v.ZT.sEmphasis,(function(n){return n.theme.colors.contentsSecondary}),(function(n){return n.theme.colors.contentsPrimary})),H=s.ZP.div.withConfig({componentId:"sc-e25bebe0-5"})(I(),v.ZT.xsEmphasis,v.wL.light.contentsSecondary,(function(n){return n.theme.colors.contentsYellow})),W=s.ZP.i.withConfig({componentId:"sc-e25bebe0-6"})(R()),Y=s.ZP.div.withConfig({componentId:"sc-e25bebe0-7"})(P(),v.ZT.xsEmphasis,v.z2.SCREEN_MOBILE_ONLY),Q=s.ZP.a.withConfig({componentId:"sc-e25bebe0-8"})(_()),K=(0,s.ZP)(H).withConfig({componentId:"sc-e25bebe0-9"})(A()),q=s.ZP.a.withConfig({componentId:"sc-e25bebe0-10"})(T(),v.ZT.sEmphasis,(function(n){return n.theme.colors.contentsSecondary}),(function(n){return n.theme.colors.contentsPrimary})),X=s.ZP.span.withConfig({componentId:"sc-e25bebe0-11"})(y()),$=s.ZP.div.withConfig({componentId:"sc-e25bebe0-12"})(k(),v.ZT.xsPlain,(function(n){return n.theme.colors.contentsTertiary})),J=s.ZP.div.withConfig({componentId:"sc-e25bebe0-13"})(S(),v.z2.SCREEN_MOBILE_ONLY),nn=s.ZP.span.withConfig({componentId:"sc-e25bebe0-14"})(j()),en=(0,s.ZP)(l.ti).withConfig({componentId:"sc-e25bebe0-15"})(O(),v.ZT.sPlain),tn=s.ZP.div.withConfig({componentId:"sc-e25bebe0-16"})(F(),(function(n){return n.showPoster?(0,s.iv)(N(),M):(0,s.iv)(L(),M,U)}),v.z2.SCREEN_MOBILE_ONLY,(function(n){return n.showPoster?(0,s.iv)(B(),M,z,Y,q,nn,en):(0,s.iv)(D(),M,U,Y,q)})),rn=function(n){var e=n.username,t=n.src,r=n.userContentRating,i=n.t;return(0,a.jsx)(Y,{children:(0,a.jsxs)(Q,{href:"/users/".concat(e),children:[(0,a.jsx)(l.qE,{size:"3.5em",borderThickness:"2px",src:t,borderBackground:"grey",alt:i("common:core.usernameAvatar",{username:e})}),(0,a.jsxs)(K,{"aria-label":i("channel:reviews.starRating",{rating:r}),children:[(0,a.jsx)(W,{className:"icon-star-empty","aria-hidden":!0}),r]})]})})};e.Z=function(n){var e,t,o,s,l,d,v,Z,b,x,C,E,I,R=n.review,P=n.isOwnReview,_=n.reviewActions,A=n.specificReviewInfo,T=n.reviewCover,y=n.showPoster,k=void 0!==y&&y,S=n.vkalParams,j=(0,p.a)().user,O=(0,g.$G)(["channel","common"]).t,N=R.user,L=R.userContentRating,B=R.createdAt,D=R.reviewNote,F=null===N||void 0===N?void 0:N.username,Y=P?O("channel:reviews.you"):F,Q=(P?null===j||void 0===j||null===(e=j.images)||void 0===e||null===(t=e.avatar)||void 0===t?void 0:t.url:null===N||void 0===N||null===(o=N.avatarImage)||void 0===o?void 0:o.url)||"https://1.viki.io/a/ph/avatar_medium.png",K=A||B&&(0,a.jsx)($,{children:f.Z.formatToLocalisedDate(B)});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(tn,{showPoster:k,children:[(0,a.jsxs)(U,{href:"/tv/".concat(null===(s=R.resource)||void 0===s?void 0:s.id),onClick:function(){var n,e;h.Ar.sendClickEvent((0,i.Z)((0,r.Z)({},S),{what:m.Z.Common.Thumbnail.CONTAINER,what_id:null===(n=R.resource)||void 0===n?void 0:n.id,container_id:null===(e=R.resource)||void 0===e?void 0:e.id}))},"data-what":"channel_image","data-what-id":null===(l=R.resource)||void 0===l?void 0:l.id,children:[(0,a.jsx)(V,{placeholderSrc:null===(d=R.resource)||void 0===d||null===(v=d.posterImage)||void 0===v?void 0:v.getScaledUrl(u.vK.Standard16),src:null!==(I=null===(Z=R.resource)||void 0===Z||null===(b=Z.posterImage)||void 0===b?void 0:b.getScaledUrl(u.vK.Standard160))&&void 0!==I?I:"",responsiveAspectRatio:1.77,className:"responsive-img",alt:""}),(0,a.jsx)(z,{children:null===(x=R.resource)||void 0===x?void 0:x.localisedTitle})]}),(0,a.jsxs)(M,{children:[(0,a.jsx)(G,{href:"/tv/".concat(null===(C=R.resource)||void 0===C?void 0:C.id),children:null===(E=R.resource)||void 0===E?void 0:E.localisedTitle}),(0,a.jsxs)(H,{"aria-label":O("channel:reviews.starRating",{rating:L}),children:[(0,a.jsx)(W,{className:"icon-star-empty","aria-hidden":!0}),L]})]}),(0,a.jsx)(rn,{username:F,src:Q,userContentRating:L,t:O}),(0,a.jsx)(q,{href:"/users/".concat(F),children:Y}),(0,a.jsx)(X,{children:K}),(0,a.jsx)(J,{children:_}),T?(0,a.jsx)(nn,{children:T}):D?(0,a.jsx)(en,{readMore:O("common:core.readMore"),readLess:O("common:core.readLess"),onClick:function(n){h.Ar.sendClickEvent((0,r.Z)({what:m.Z.ChannelPage.ReviewsTab.BaseReview.READ_MORE_LABEL,what_id:R.id,where:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB,value:n},S))},children:(0,w.O)(D)}):null]}),(0,a.jsx)(c.Z,{})]})}},39467:function(n,e,t){"use strict";t.d(e,{ZP:function(){return on}});var r=t(47568),i=t(26042),o=t(69396),a=t(7297),s=t(10092),c=t(85893),l=t(67294),u=t(87379);function d(){var n=(0,a.Z)(["\n  display: flex;\n  flex-wrap: wrap-reverse;\n  justify-content: flex-end;\n\n  button {\n    margin-top: 0.75em;\n  }\n\n  button + button {\n    margin-left: 1.5em;\n  }\n"]);return d=function(){return n},n}var v=u.ZP.div.withConfig({componentId:"sc-9165b0b2-0"})(d()),f=t(66111),h=t(60236),p=t(49243),g=t(53984),w=t(29237),m=t(6150),Z=t(18072);function b(){var n=(0,a.Z)(["\n  color: ",";\n  margin-top: ",";\n"]);return b=function(){return n},n}var x=u.ZP.div.withConfig({componentId:"sc-f6e3a928-0"})(b(),(function(n){return n.theme.colors.contentsRed}),(function(n){return n.hasError?"1em":"null"})),C=function(n){var e=n.deleteCallback,t=n.reviewId,i=(0,w.$G)(["channel","common"]).t,o=(0,l.useState)(!1),a=o[0],u=o[1],d=(0,l.useState)(!1),f=d[0],b=d[1],C=(0,l.useState)(""),E=C[0],I=C[1],R=function(){var n=(0,r.Z)((function(){var n,r,o;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:g.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.UserReview.CONFIRM_DELETE_BUTTON,what_id:t,where:m.Z.ChannelPage.ReviewsTab.UserReview.DELETE_REVIEW_POPUP}),b(!0),o=!1,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Z.Z.deleteReview(t)];case 2:return r=a.sent(),[3,4];case 3:return a.sent(),o=!0,[3,4];case 4:return o||!(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.ok)?(I(i("channel:reviews.reviewBox.error.deleteFailed")),b(!1),[2]):(u(!1),b(!1),e&&e(),[2])}}))}));return function(){return n.apply(this,arguments)}}(),P=function(){g.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.UserReview.DISMISS_DELETE_BUTTON,where:m.Z.ChannelPage.ReviewsTab.UserReview.DELETE_REVIEW_POPUP}),I(""),u(!1)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h.zx,{variant:"text-primary",onClick:function(){g.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.UserReview.DELETE_BUTTON,what_id:t,where:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB}),u(!0)},children:i("common:core.delete")}),(0,c.jsxs)(p.u_,{isOpen:a,title:i("channel:reviews.deleteModal.heading"),onClose:P,wide:!0,footer:(0,c.jsxs)(v,{children:[(0,c.jsx)(h.zx,{variant:"text-primary",onClick:P,children:i("channel:reviews.cancel")}),(0,c.jsx)(h.zx,{variant:"primary",onClick:R,isLoading:f,children:i("common:core.delete")})]}),children:[i("channel:reviews.deleteModal.supportingText"),(0,c.jsx)(x,{hasError:!!E,children:E})]})]})},E=t(54938),I=t(90908),R=t(31639),P=t(58538),_=t(33153),A=t(96595),T=t(37688),y=t(17214),k=t(87395),S=t(62011),j=t(75688);function O(){var n=(0,a.Z)(["\n  display: flex;\n"]);return O=function(){return n},n}function N(){var n=(0,a.Z)(["\n  align-self: center;\n  margin: 12px 6px 12px 24px;\n"]);return N=function(){return n},n}function L(){var n=(0,a.Z)(["\n  ","\n  color: ",";\n  padding: 1em 0.5em;\n  align-self: center;\n"]);return L=function(){return n},n}function B(){var n=(0,a.Z)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n"]);return B=function(){return n},n}function D(){var n=(0,a.Z)(["\n  justify-content: left;\n  margin: 0 1.5em 0 3.8em;\n"]);return D=function(){return n},n}function F(){var n=(0,a.Z)(["\n  ","\n  display: flex;\n  position: absolute;\n  right: 1.8em;\n  top: -3.5em;\n"]);return F=function(){return n},n}function U(){var n=(0,a.Z)(["\n  margin-top: 0.86em;\n  margin-left: 3.5em;\n  align-self: center;\n  white-space: nowrap;\n  color: ",";\n  ",";\n"]);return U=function(){return n},n}function V(){var n=(0,a.Z)(["\n  flex-grow: 1;\n  border: none;\n  height: 5em;\n  margin: 0.5em 1.5em 1.5em 3.5em;\n  padding: 0.9em;\n  color: ",";\n  background: none;\n  outline: 0;\n  resize: none;\n\n  &::placeholder {\n    color: ",";\n  }\n"]);return V=function(){return n},n}function z(){var n=(0,a.Z)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 0 1.5em 1em 1.5em;\n"]);return z=function(){return n},n}function M(){var n=(0,a.Z)(["\n  margin-top: 0.75em;\n  align-items: center;\n"]);return M=function(){return n},n}function G(){var n=(0,a.Z)(["\n  ","\n  color: ",";\n  margin: 0.5em 1.5em 0;\n"]);return G=function(){return n},n}var H=5e3,W=u.ZP.div.withConfig({componentId:"sc-9b0424c5-0"})(O()),Y=u.ZP.div.withConfig({componentId:"sc-9b0424c5-1"})(N()),Q=u.ZP.span.withConfig({componentId:"sc-9b0424c5-2"})(L(),P.ZT.sPlain,(function(n){var e=n.theme;return n.isHighlight?e.colors.contentsBlue1:e.colors.contentsTertiary})),K=u.ZP.div.withConfig({componentId:"sc-9b0424c5-3"})(B()),q=(0,u.ZP)(E.Z).withConfig({componentId:"sc-9b0424c5-4"})(D()),X=u.ZP.div.withConfig({componentId:"sc-9b0424c5-5"})(F(),P.ZT.xsPlain),$=u.ZP.div.withConfig({componentId:"sc-9b0424c5-6"})(U(),(function(n){return function(n,e){var t="";switch(e){case"yellow":t=n.colors.contentsContrastYellow;break;case"red":t=n.colors.contentsContrastRed;break;default:t=n.colors.contentsTertiary}return t}(n.theme,n.variant)}),(function(n){return n.variant?P.ZT.xsEmphasis:P.ZT.xsPlain})),J=u.ZP.textarea.withConfig({componentId:"sc-9b0424c5-7"})(V(),(function(n){return n.theme.colors.contentsPrimary}),(function(n){return n.theme.colors.contentsDisabled})),nn=u.ZP.div.withConfig({componentId:"sc-9b0424c5-8"})(z()),en=(0,u.ZP)(R.XZ).withConfig({componentId:"sc-9b0424c5-9"})(M()),tn=u.ZP.div.withConfig({componentId:"sc-9b0424c5-10"})(G(),P.ZT.sPlain,(function(n){return n.theme.colors.contentsRed})),rn=function(n,e){var t=!0,r=(null===e||void 0===e?void 0:e.length)||0;0!==r&&r<40&&(t=!1);var i="",o="",a="";return i=r<40?n("channel:reviews.reviewBox.charactersLeft",{count:40-r}):"".concat(r," / ").concat(H),r>0&&r<40||r>4700&&r<H?o="yellow":r>=H&&(o="red",a=n("channel:reviews.reviewBox.reachedCharacterLimit")),{isValid:t,prompt:{message:i,variant:o},error:a}},on=function(n){var e=(0,w.$G)(["channel","common"]).t,t=(0,T.a)().user,a=n.containerId,u=n.userAvatar,d=n.expanded,p=void 0!==d&&d,b=n.initialReview,x=n.onSubmitSuccess,E=n.onCancel,R=n.onDelete,P=e("channel:reviews.reviewBox.prompt"),O=e("channel:reviews.reviewBox.placeholder"),N=(null===b||void 0===b?void 0:b.reviewNote)?(0,y.O)(b.reviewNote):"",L=(0,l.useRef)(null),B=(0,l.useState)({message:"",variant:""}),D=B[0],F=B[1],U=(0,l.useState)(!1),V=U[0],z=U[1],M=(0,l.useState)(""),G=M[0],on=M[1],an=(0,l.useState)(p),sn=an[0],cn=an[1],ln=(0,l.useState)((null===b||void 0===b?void 0:b.userContentRating)||0),un=ln[0],dn=ln[1],vn=(0,l.useState)((null===b||void 0===b?void 0:b.spoiler)||!1),fn=vn[0],hn=vn[1],pn=(0,l.useState)(!1),gn=pn[0],wn=pn[1],mn=(0,l.useState)(Boolean(null===b||void 0===b?void 0:b.id)),Zn=mn[0],bn=mn[1],xn=Zn?N:"",Cn=(0,l.useState)(xn),En=Cn[0],In=Cn[1],Rn=(0,l.useCallback)((function(){on("");var n=rn(e,En),t=n.isValid,r=n.prompt,i=n.error;return i&&on(i),F(r),V===t&&z(!t),t}),[V,En]);(0,l.useEffect)((function(){var n;sn&&((null===(n=null===L||void 0===L?void 0:L.current)||void 0===n?void 0:n.style)&&(null===n||void 0===n?void 0:n.scrollHeight)&&(n.style.height="0",n.style.height="".concat(Math.max(n.scrollHeight,80),"px")),Rn())}),[sn,Rn]),(0,l.useEffect)((function(){var n;sn&&(null===L||void 0===L||null===(n=L.current)||void 0===n||n.focus(),function(n){if(n){var e=n.value.length;n.setSelectionRange(e,e)}}(null===L||void 0===L?void 0:L.current))}),[sn]);var Pn=function(n){n?g.Ar.fireAnalyticsEvent(A.F.CHANNEL_PAGE.REVIEW_SUCCESS,{where:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB}):g.Ar.fireAnalyticsEvent(A.F.CHANNEL_PAGE.REVIEW_FAIL,{where:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB}),wn(!1)},_n=function(){var n=(0,r.Z)((function(){var n,r,c,l,u,d,v,f,h,p,w,C,I,R,P;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:if(b&&b.userContentRating===un&&b.spoiler===fn&&N===En)return cn(!1),on(""),E&&E(),[2];if(wn(!0),g.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.UserReview.SUBMIT_BUTTON,where:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB}),un<=0||un>10)return on(e("channel:reviews.reviewBox.noRating")),Pn(!1),[2];if(r=En,En){if(c=(0,_.rb)(En),l=c.sanitizedContent,!c.isSuccess)return u=e("channel:reviews.reviewBox.error.submitFailed"),d=e("channel:reviews.reviewBox.error.unsanitized"),on("".concat(u," (").concat(d,")")),Pn(!1),[2];l!==En&&In(l),r=l}if(!rn(e,r).isValid)return Pn(!1),[2];v={userContentRating:un,reviewNote:r,spoiler:fn},h=!1,w=null,s.label=1;case 1:return s.trys.push([1,6,,7]),Zn?[4,Z.Z.editReview((0,o.Z)((0,i.Z)({},v),{id:null===b||void 0===b?void 0:b.id}))]:[3,3];case 2:return f=s.sent(),w=new k.Z((0,i.Z)({},b,v)),[3,5];case 3:return[4,Z.Z.createReview(a,v)];case 4:f=s.sent(),w=new k.Z((0,o.Z)((0,i.Z)({},v),{id:null===f||void 0===f||null===(C=f.data)||void 0===C?void 0:C.id,createdAt:new Date,user:S.Z.fromUserInfo(t)||void 0})),s.label=5;case 5:return[3,7];case 6:return I=s.sent(),h=!0,p=I.message,[3,7];case 7:if(h||!(null===f||void 0===f||null===(n=f.data)||void 0===n?void 0:n.ok)){switch(p){case j.H.NetworkError:R=e("channel:reviews.reviewBox.error.network");break;case j.H.Unauthorized:R=e("channel:reviews.reviewBox.error.unauthorized");break;case Z.T.UNSANITIZED_CONTENT:R=e("channel:reviews.reviewBox.error.unsanitized");break;case j.H.GenericError:default:R=""}return P=e("channel:reviews.reviewBox.error.submitFailed"),R&&(P+=" (".concat(R,")")),on(P),Pn(!1),[2]}return Pn(!0),x&&x(w),[2]}}))}));return function(){return n.apply(this,arguments)}}();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(f.Z,{onFocus:function(){sn||(g.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.UserReview.REVIEW_INPUT,where:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB}),cn(!0))},tabIndex:sn?void 0:0,isExpanded:sn,"data-testid":"review-box",children:[(0,c.jsxs)(W,{children:[(0,c.jsx)(Y,{children:(0,c.jsx)(I.qE,{size:"32px",borderThickness:"0",src:u})}),(0,c.jsx)(Q,{isHighlight:!sn,children:P})]}),sn&&(0,c.jsxs)(K,{children:[(0,c.jsx)(X,{children:(0,c.jsx)(en,{onChange:function(n){g.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.UserReview.SPOILER_CHECKBOX,where:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB,value:n.target.checked}),hn(n.target.checked)},checked:fn,children:e("channel:reviews.spoiler")})}),(0,c.jsx)(q,{initialRating:un,onRate:function(n){dn(n)},iconFontSize:"1.4em",iconVariant:"default"}),(0,c.jsx)(J,{ref:L,value:En,maxLength:H,placeholder:O,onChange:function(n){In(n.target.value)}}),(0,c.jsxs)(nn,{children:[(0,c.jsx)($,{variant:D.variant,children:D.message}),(0,c.jsxs)(v,{children:[Zn?(0,c.jsx)(C,{reviewId:(null===b||void 0===b?void 0:b.id)||"",deleteCallback:function(){bn(!1),hn(!1),dn(0),In(""),cn(!1),"function"===typeof R&&R()}}):(0,c.jsx)(h.zx,{variant:"text-primary",onClick:function(){g.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.UserReview.CANCEL_BUTTON,where:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB}),cn(!1),on(""),E&&E()},children:e("channel:reviews.cancel")}),(0,c.jsx)(h.zx,{variant:"primary",onClick:_n,isLoading:gn,disabled:V,children:e(Zn?"common:core.update":"common:core.submit")})]})]})]})]}),sn&&(0,c.jsx)(tn,{children:G})]})}},31045:function(n,e,t){"use strict";t.d(e,{Z:function(){return J}});var r=t(26042),i=t(7297),o=t(85893),a=t(67294),s=t(45697),c=t.n(s),l=t(87379),u=t(7352),d=t(47568),v=t(10092),f=t(76343),h=t(59251),p=t(49243),g=t(60236),w=t(53984),m=t(6150),Z=t(29237),b=t(35818),x=t.n(b);function C(){var n=(0,i.Z)(["\n  color: ",";\n"]);return C=function(){return n},n}function E(){var n=(0,i.Z)(["\n  display: block;\n  margin: 0 auto;\n  min-width: 7.5em;\n"]);return E=function(){return n},n}var I=l.ZP.a.withConfig({componentId:"sc-dbef2d79-0"})(C(),(function(n){return n.theme.colors.contentsBlue1})),R=(0,l.ZP)(g.zx).withConfig({componentId:"sc-dbef2d79-1"})(E()),P=function(n){var e=n.isOpen,t=n.onClose,r=(0,Z.$G)(["channel"]).t;(0,a.useEffect)((function(){e&&w.Ar.sendImpressionEvent({where:m.Z.ChannelPage.ReviewsTab.Review.REPORT_CONFIRMATION_POPUP})}),[e]);return(0,o.jsx)(p.u_,{isOpen:e,title:r("channel:reviews.reportModal.heading"),onClose:function(){w.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.Review.DISMISS_BUTTON,where:m.Z.ChannelPage.ReviewsTab.Review.REPORT_CONFIRMATION_POPUP}),"function"===typeof t&&t()},imageProps:{src:x(),width:"64px",height:"64px"},footer:(0,o.jsx)(R,{variant:"primary",onClick:function(){w.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.Review.OK_BUTTON,where:m.Z.ChannelPage.ReviewsTab.Review.REPORT_CONFIRMATION_POPUP}),"function"===typeof t&&t()},children:r("channel:reviews.reportModal.ok")}),children:(0,o.jsxs)(h.c,{t:r,i18nKey:"channel:reviews.reportModal.supportingText",children:["We will take the necessary action if this review is found to be in violation of the",(0,o.jsx)(I,{href:"https://support.viki.com/hc/en-us/articles/360000175408-Reviews-Policy",target:"_blank",rel:"noopener",onClick:function(){w.Ar.sendClickEvent({what:m.Z.ChannelPage.ReviewsTab.Review.REVIEWS_POLICY_LABEL,where:m.Z.ChannelPage.ReviewsTab.Review.REPORT_CONFIRMATION_POPUP})},children:"Reviews Policy"}),"."]})})};P.propTypes={isOpen:c().bool,onClose:c().func};var _=t(58538),A=t(7307),T=t(18072);function y(){var n=(0,i.Z)(["\n  width: 10px;\n  padding: 4px 12px 0 12px; /* to center kebab icon and give more clickable space */\n"]);return y=function(){return n},n}function k(){var n=(0,i.Z)(["\n  position: relative;\n  align-self: center;\n"]);return k=function(){return n},n}function S(){var n=(0,i.Z)(["\n  box-shadow: 0px 2px 6px ",";\n  border-radius: 0.5em;\n  background: ",";\n  position: absolute;\n  margin-top: 0.25em;\n  display: ",";\n  z-index: 1;\n  right: 0;\n  max-width: 90vw;\n  width: 200px;\n  width: max-content;\n  z-index: 2;\n  overflow: hidden;\n"]);return S=function(){return n},n}function j(){var n=(0,i.Z)(["\n  ","\n  position: relative;\n  text-align: left;\n  width: 100%;\n  padding: 10px 12px;\n  cursor: pointer;\n  border: 0;\n  background-color: transparent;\n  color: ",";\n  outline: none; /* focus styling done below */\n  border: 1px solid transparent;\n\n  &:hover {\n    background: ",";\n  }\n\n  &:focus {\n    background-color: ",";\n    border-color: ",";\n\n    &:after {\n      content: '';\n      position: absolute;\n      top: -3px;\n      left: -3px;\n      bottom: -3px;\n      right: -3px;\n      border: 3px solid ",";\n      opacity: 0.3;\n    }\n  }\n"]);return j=function(){return n},n}var O=(0,l.ZP)(f.A).withConfig({componentId:"sc-740f738-0"})(y()),N=l.ZP.div.withConfig({componentId:"sc-740f738-1"})(k()),L=l.ZP.ul.withConfig({componentId:"sc-740f738-2"})(S(),(function(n){return n.theme.colors.surface2}),(function(n){return n.theme.colors.surface2}),(function(n){return n.showDropdown?"block":"none"})),B=l.ZP.button.withConfig({componentId:"sc-740f738-3"})(j(),_.ZT.sPlain,(function(n){return n.theme.colors.contentsPrimary}),(function(n){return n.theme.colors.surface3}),(function(n){return n.theme.colors.surface1}),(function(n){return n.theme.colors.contentsBlue1}),(function(n){return n.theme.colors.contentsBlue1})),D=["advertisement","inappropriate","spoiler"],F={advertisement:m.Z.ChannelPage.ReviewsTab.Review.ADVERTISEMENT_LABEL,inappropriate:m.Z.ChannelPage.ReviewsTab.Review.INAPPROPRIATE_LABEL,spoiler:m.Z.ChannelPage.ReviewsTab.Review.SPOILER_LABEL},U=function(n){var e=n.reviewId,t=n.isLoggedIn,i=n.isOwnReview,s=n.flaggedByCurrentUser,c=n.showReportedCallback,l=n.vkalParams,u=(0,Z.$G)("channel").t,h=(0,a.useState)(!1),p=h[0],g=h[1],b=(0,a.useState)(!1),x=b[0],C=b[1],E=(0,a.useState)(!1),I=E[0],R=E[1],_=(0,a.useRef)(null),y=(0,a.useCallback)((function(n){_.current&&!_.current.contains(n.target)&&(g(!1),globalThis.document.removeEventListener("click",y,!0))}),[]),k=function(){var n=(0,d.Z)((function(n,i){var o,a,s,u;return(0,v.__generator)(this,(function(n){switch(n.label){case 0:return s=(0,r.Z)({what:F[i],what_id:e,where:null!==(a=null===l||void 0===l?void 0:l.where)&&void 0!==a?a:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB},(null===l||void 0===l?void 0:l.section)&&{section:null===l||void 0===l?void 0:l.section}),t?x?[2]:(C(!0),[4,T.Z.postFlag(e,i)]):(globalThis.window&&(w.Mw.updateSectionId(m.Z.Section.SIGN_UP_PROMPT),w.Ar.sendClickEvent(s),(0,A.Dm)()),[2]);case 1:return(null===(u=n.sent())||void 0===u||null===(o=u.data)||void 0===o?void 0:o.ok)?(w.Ar.sendClickEvent(s),g(!1),globalThis.document.removeEventListener("click",y,!0),c(i),C(!1),R(!0),[2]):(C(!1),[2])}}))}));return function(e,t){return n.apply(this,arguments)}}();return I?(0,o.jsx)(P,{isOpen:I,onClose:function(){return R(!1)}}):s||i?null:(0,o.jsxs)(N,{ref:_,children:[(0,o.jsx)(f.a,{onClick:function(){var n;w.Ar.sendClickEvent((0,r.Z)({what:m.Z.ChannelPage.ReviewsTab.Review.MORE_ICON,what_id:e,where:null!==(n=null===l||void 0===l?void 0:l.where)&&void 0!==n?n:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB},(null===l||void 0===l?void 0:l.section)&&{section:l.section})),p?globalThis.document.removeEventListener("click",y,!0):globalThis.document.addEventListener("click",y,!0),g(!p)},children:(0,o.jsx)(O,{className:"icon-more","aria-haspopup":"menu"})}),(0,o.jsx)(L,{showDropdown:p,children:D.map((function(n){return(0,o.jsx)("li",{children:(0,o.jsx)(B,{onClick:function(e){return k(e,n)},children:u("channel:reviews.reportFlag.".concat(n))})},n)}))})]})},V=t(78970),z=function(n){var e=n.reviewId,t=n.isLoggedIn,r=n.likes,i=n.dislikes,a=n.isOwnReview,s=void 0!==a&&a,c=n.userVoteObj,l=void 0===c?null:c,u=n.flaggedByCurrentUser,d=n.showReportedCallback,v=n.vkalParams,f=n.containerId;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(V.Z,{reviewId:e,isLoggedIn:t,isOwnReview:s,userVoteObj:l,likes:r||0,dislikes:i||0,vkalParams:v,containerId:f}),(0,o.jsx)(U,{reviewId:e,isLoggedIn:t,isOwnReview:s,flaggedByCurrentUser:u,showReportedCallback:d})]})};function M(){var n=(0,i.Z)(["\n  ","\n  display: inline-flex;\n  color: ",";\n"]);return M=function(){return n},n}function G(){var n=(0,i.Z)(["\n  margin-right: 8px;\n"]);return G=function(){return n},n}function H(){var n=(0,i.Z)(["\n  ","\n  color: ",";\n  flex-basis: 100%;\n  cursor: pointer;\n"]);return H=function(){return n},n}function W(){var n=(0,i.Z)(["\n  color: ",";\n"]);return W=function(){return n},n}var Y=l.ZP.div.withConfig({componentId:"sc-def5e152-0"})(M(),_.ZT.xsPlain,(function(n){return n.theme.colors.contentsTertiary})),Q=l.ZP.i.withConfig({componentId:"sc-def5e152-1"})(G()),K=l.ZP.div.withConfig({componentId:"sc-def5e152-2"})(H(),_.ZT.sPlain,(function(n){return n.theme.colors.contentsSecondary})),q=l.ZP.span.withConfig({componentId:"sc-def5e152-3"})(W(),(function(n){return n.theme.colors.contentsBlue1})),X=function(n){var e=n.t,t=n.reason,r=n.onClick;return(0,o.jsxs)(K,{onClick:r,children:[t,(0,o.jsxs)(q,{children:[" ",e("channel:reviews.tapToRead")]})]})},$=function(n){var e,t,i=n.review,s=n.userId,c=n.userVoteObj,l=n.flaggedByCurrentUser,d=n.showPoster,v=void 0!==d&&d,f=n.vkalParams,h=(0,Z.$G)("channel").t,p=i.user,g=i.spoiler,b=i.likes,x=i.dislikes,C=i.flagsInappropriate,E=void 0===C?0:C,I=i.flagsAdvertisement,R=void 0===I?0:I,P=i.flagsSpoiler,_=void 0===P?0:P,A=Boolean(s),T=null!==(t=s===(null===p||void 0===p?void 0:p.id))&&void 0!==t&&t,y=E>=4||R>=4||_>=4,k=(0,a.useState)(l),S=k[0],j=k[1],O=(0,a.useState)(!g&&!y&&!S||T),N=O[0],L=O[1];(0,a.useEffect)((function(){l&&(j(l),L(!1))}),[l]);var B;S&&(B=(0,o.jsxs)(Y,{children:[(0,o.jsx)(Q,{className:"icon-flag"}),h("channel:reviews.reported")]}));var D="";y||S?D=h("channel:reviews.highFlagCount"):g&&(D=h("channel:reviews.containsSpoilers"));var F,U=N?null:(0,o.jsx)(X,{t:h,reason:D,onClick:function(){w.Ar.sendClickEvent((0,r.Z)({what:m.Z.ChannelPage.ReviewsTab.Review.SPOILER_READ_LABEL,what_id:i.id,where:m.Z.ChannelPage.ReviewsTab.REVIEWS_TAB},f)),L(!0)}});return(0,o.jsx)(u.Z,{review:i,isOwnReview:T,vkalParams:f,reviewActions:(0,o.jsx)(z,{reviewId:i.id,isLoggedIn:A,likes:b,dislikes:x,isOwnReview:T,userVoteObj:c,flaggedByCurrentUser:S,showReportedCallback:function(){j(!0),L(!1)},vkalParams:f,containerId:null!==(F=null===(e=i.resource)||void 0===e?void 0:e.id)&&void 0!==F?F:""}),specificReviewInfo:B,reviewCover:U,showPoster:v})};$.propTypes={userId:c().string,review:c().object.isRequired,userVoteObj:c().object,flaggedByCurrentUser:c().bool};var J=$},15829:function(n,e,t){"use strict";t.d(e,{DF:function(){return h},Vb:function(){return g},u$:function(){return p},us:function(){return v}});var r=t(47568),i=t(26042),o=t(69396),a=t(10092),s=t(67294),c=t(33092),l=t(87395),u=t(18072),d={topReviews:{sort:"review_rank",direction:"desc",page:1},latestFirst:{sort:"created_at",direction:"desc",page:1},earliestFirst:{sort:"created_at",direction:"asc",page:1},highestToLowest:{sort:"user_content_rating",direction:"desc",page:1},lowestToHighest:{sort:"user_content_rating",direction:"asc",page:1}},v=Object.keys(d),f={per_page:6,has_review_note:1};function h(n,e,t){var u=(0,s.useState)({reviews:null,totalPages:0}),h=u[0],p=u[1];return(0,s.useEffect)((function(){function t(){return t=(0,r.Z)((function(){var t,r,s,u,h,g,w,m,Z;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=e.selectedIndex,r=e.page,s=(0,o.Z)((0,i.Z)({},f,d[v[t]]),{page:r}),[4,c.hi.send("containers/".concat(n,"/reviews.json"),{params:s})];case 1:return u=a.sent(),g=null!==(h=u.count)&&void 0!==h?h:1,w=Math.ceil(g/6),Z=null!==(m=l.Z.fromApiDataList(u.response))&&void 0!==m?m:[],p({reviews:Z,totalPages:w}),[2]}}))})),t.apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n,e,t]),h}function p(n,e){var t=(0,s.useState)({}),i=t[0],o=t[1];return(0,s.useEffect)((function(){function t(){return(t=(0,r.Z)((function(){var n,t,r,i,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:n=e.map((function(n){return n.id})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,u.Z.getVotes(n)];case 2:return t=a.sent(),[3,4];case 3:return r=a.sent(),console.error(r),[3,4];case 4:return i=t&&t.data&&Array.isArray(t.data.results)?t.data.results:[],s=i.reduce((function(n,e){return n[e.resource_id]={like:e.helpful},n}),{}),o(s),[2]}}))}))).apply(this,arguments)}n&&e&&Object.keys(e).length>0&&function(){t.apply(this,arguments)}()}),[n,e]),i}function g(n,e){var t=(0,s.useState)({}),i=t[0],o=t[1];return(0,s.useEffect)((function(){function t(){return(t=(0,r.Z)((function(){var n,t,r,i,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:n=e.map((function(n){return n.id})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,u.Z.getFlags(n)];case 2:return t=a.sent(),[3,4];case 3:return r=a.sent(),console.error(r),[3,4];case 4:return i=t&&t.data&&Array.isArray(t.data.results)?t.data.results:[],s=i.reduce((function(n,e){return n[e.resource_id]={flag:e.flag},n}),{}),o(s),[2]}}))}))).apply(this,arguments)}n&&e&&Object.keys(e).length>0&&function(){t.apply(this,arguments)}()}),[n,e]),i}},89774:function(n,e,t){"use strict";t.d(e,{Z:function(){return j}});var r=t(7297),i=t(85893),o=t(67294),a=t(87379),s=t(7352),c=t(39467),l=t(26042),u=t(69396),d=t(76343),v=t(78970),f=t(58538),h=t(53984),p=t(29237),g=t(6150);function w(){var n=(0,r.Z)(["\n  display: flex;\n  "," {\n    display: none;\n  }\n"]);return w=function(){return n},n}function m(){var n=(0,r.Z)(["\n  padding-right: 0;\n"]);return m=function(){return n},n}var Z=a.ZP.div.withConfig({componentId:"sc-a2842-0"})(w(),f.z2.SCREEN_MOBILE_ONLY),b=(0,a.ZP)(d.A).withConfig({componentId:"sc-a2842-1"})(m()),x=function(n){var e=(0,p.$G)("common").t,t=n.hiddenStatus,r=void 0!==t&&t,o=n.reviewId,a=n.likes,s=n.dislikes,c=n.setIsEditing,f=n.vkalParams,w=n.containerId,m=null;return r||(m=(0,i.jsx)(Z,{children:(0,i.jsxs)(d.a,{onClick:function(){var n;h.Ar.sendClickEvent((0,u.Z)((0,l.Z)({what:g.Z.ChannelPage.ReviewsTab.UserReview.EDIT_BUTTON,what_id:o,where:null!==(n=null===f||void 0===f?void 0:f.where)&&void 0!==n?n:g.Z.ChannelPage.ReviewsTab.REVIEWS_TAB},(null===f||void 0===f?void 0:f.section)&&{section:f.section}),{container_id:w})),c(!0)},children:[(0,i.jsx)(b,{className:"icon-edit"}),e("common:core.edit")]})})),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Z,{reviewId:o,isLoggedIn:!0,isOwnReview:!0,likes:a||0,dislikes:s||0,vkalParams:f,containerId:w}),m]})},C=t(26506);function E(){var n=(0,r.Z)(["\n  ","\n  display: inline-flex;\n  color: ",";\n"]);return E=function(){return n},n}function I(){var n=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  max-width: calc(90vw - 68px); /* to make sure there's space for the avatar */\n\n  "," {\n    margin-top: 8px;\n  }\n"]);return I=function(){return n},n}function R(){var n=(0,r.Z)([""]);return R=function(){return n},n}function P(){var n=(0,r.Z)(["\n  ",";\n  display: inline-flex;\n  position: relative;\n  align-items: center;\n  color: ",";\n  width: fit-content;\n  padding: 0 8px 0 4px;\n  margin: 2px 8px 2px 0;\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background: ",";\n    opacity: 0.2;\n    border-radius: 4px;\n  }\n\n  "," path {\n    fill: ",";\n  }\n"]);return P=function(){return n},n}var _=a.ZP.div.withConfig({componentId:"sc-2de946fb-0"})(E(),f.ZT.xsPlain,(function(n){return n.theme.colors.contentsTertiary})),A=a.ZP.div.withConfig({componentId:"sc-2de946fb-1"})(I(),f.z2.SCREEN_MOBILE_ONLY),T=(0,a.ZP)(C.Z).withConfig({componentId:"sc-2de946fb-2"})(R()),y=function(n,e){var t="";switch(e){case"yellow":t=n.colors.contentsYellow;break;case"red":t=n.colors.contentsRed;break;default:t=n.colors.contentsSecondary}return t},k=a.ZP.div.withConfig({componentId:"sc-2de946fb-3"})(P(),f.ZT.xsEmphasis,(function(n){var e=n.theme,t=n.variant;return y(e,t)}),(function(n){var e=n.theme,t=n.variant;return y(e,t)}),T,(function(n){var e=n.theme,t=n.variant;return y(e,t)})),S=function(n){var e=(0,p.$G)("channel").t,t=n.hiddenStatus,r=n.flagsInappropriate,o=n.flagsAdvertisement,a=n.spoiler,s=e("channel:reviews.removedInPublic"),c=t?"red":"yellow",l="";return t?l=e(o>r?"channel:reviews.advertisement":"channel:reviews.inappropriate"):a&&(l=e("channel:reviews.spoiler")),t||a?(0,i.jsxs)(A,{children:[(0,i.jsxs)(k,{variant:c,children:[(0,i.jsx)(T,{}),l]}),t&&(0,i.jsx)(_,{children:s})]}):null},j=function(n){var e,t,r,a,l,u=n.containerId,d=n.review,v=n.userInfo,f=n.setCurrentUserReview,h=n.showPoster,p=void 0!==h&&h,g=n.vkalParams,w=d.user,m=d.hiddenStatus,Z=d.spoiler,b=d.likes,C=d.dislikes,E=d.flagsInappropriate,I=d.flagsAdvertisement,R=Boolean(null===v||void 0===v?void 0:v.id),P=null!==(a=(null===v||void 0===v?void 0:v.id)===(null===w||void 0===w?void 0:w.id))&&void 0!==a&&a,_=(null===v||void 0===v||null===(e=v.images)||void 0===e||null===(t=e.avatar)||void 0===t?void 0:t.url)||"https://1.viki.io/a/ph/avatar_medium.png",A=(0,o.useState)(!1),T=A[0],y=A[1];if(!R||!P)return null;(Z||m)&&(l=(0,i.jsx)(S,{hiddenStatus:m,flagsInappropriate:E||0,flagsAdvertisement:I||0,spoiler:Z}));var k;return T?(0,i.jsx)(c.ZP,{containerId:u,userAvatar:_,expanded:!0,initialReview:d,onSubmitSuccess:function(n){f(n),y(!1)},onCancel:function(){return y(!1)},onDelete:function(){return f(null)}}):(0,i.jsx)(s.Z,{review:d,isOwnReview:P,vkalParams:g,reviewActions:(0,i.jsx)(x,{hiddenStatus:m,reviewId:d.id,likes:b,dislikes:C,setIsEditing:y,containerId:null!==(k=null===(r=d.resource)||void 0===r?void 0:r.id)&&void 0!==k?k:""}),specificReviewInfo:l,showPoster:p})}},78970:function(n,e,t){"use strict";var r=t(47568),i=t(26042),o=t(69396),a=t(7297),s=t(10092),c=t(85893),l=t(67294),u=t(87379),d=t(76343),v=t(53984),f=t(29237),h=t(7307),p=t(6150),g=t(18072);function w(){var n=(0,a.Z)(["\n  &.icon-thumbs-down:before {\n    position: relative;\n    bottom: -1px;\n  }\n"]);return w=function(){return n},n}var m=(0,u.ZP)(d.A).withConfig({componentId:"sc-b898d559-0"})(w());e.Z=function(n){var e=n.reviewId,t=n.isOwnReview,a=n.userVoteObj,u=void 0===a?null:a,w=n.likes,Z=n.dislikes,b=n.isLoggedIn,x=n.vkalParams,C=n.containerId,E=(0,l.useState)(u),I=E[0],R=E[1],P=(0,l.useState)(w),_=P[0],A=P[1],T=(0,l.useState)(Z),y=T[0],k=T[1],S=(0,l.useState)(!1),j=S[0],O=S[1],N=(0,f.$G)("common").t;(0,l.useEffect)((function(){R(u)}),[u]);var L=function(){var n=(0,r.Z)((function(n){var t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return[4,g.Z.patchVote(e,n)];case 1:return(null===(r=o.sent())||void 0===r||null===(t=r.data)||void 0===t?void 0:t.ok)?(i=null!==I&&I.like!==n,n?(A(_+1),i&&k(y-1)):(k(y+1),i&&A(_-1)),R({like:n}),O(!1),[2]):(O(!1),[2])}}))}));return function(e){return n.apply(this,arguments)}}(),B=function(){var n=(0,r.Z)((function(){var n,t;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,g.Z.deleteVote(e)];case 1:return(null===(t=r.sent())||void 0===t||null===(n=t.data)||void 0===n?void 0:n.ok)?((null===I||void 0===I?void 0:I.like)?A(_-1):k(y-1),R(null),O(!1),[2]):(O(!1),[2])}}))}));return function(){return n.apply(this,arguments)}}(),D=function(){var n=(0,r.Z)((function(n){var t,r;return(0,s.__generator)(this,(function(a){return t=n?p.Z.ChannelPage.ReviewsTab.Review.LIKE_BUTTON:p.Z.ChannelPage.ReviewsTab.Review.DISLIKE_BUTTON,b?(j||(v.Ar.sendClickEvent((0,o.Z)((0,i.Z)({what:t,what_id:e,where:null!==(r=null===x||void 0===x?void 0:x.where)&&void 0!==r?r:p.Z.ChannelPage.ReviewsTab.REVIEWS_TAB},(null===x||void 0===x?void 0:x.section)&&{section:null===x||void 0===x?void 0:x.section}),{value:null===I||I.like!==n,container_id:C})),O(!0),null===I||n!==I.like?L(n):B()),[2]):(globalThis.window&&(v.Mw.updateSectionId(p.Z.Section.SIGN_UP_PROMPT),v.Ar.sendClickEvent((0,i.Z)({what:t,what_id:e,where:p.Z.ChannelPage.ReviewsTab.REVIEWS_TAB,container_id:C},x)),(0,h.Dm)()),[2])}))}));return function(e){return n.apply(this,arguments)}}();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(d.a,{onClick:function(){D(!0)},disabled:t||void 0,highlighted:null===I||void 0===I?void 0:I.like,children:[(0,c.jsx)(m,{className:"icon-thumbs-up","aria-label":N("common:core.likes")}),_]}),(0,c.jsxs)(d.a,{onClick:function(){D(!1)},disabled:t||void 0,highlighted:!1===(null===I||void 0===I?void 0:I.like),children:[(0,c.jsx)(m,{className:"icon-thumbs-down","aria-label":N("common:core.dislikes")}),y]})]})}},76343:function(n,e,t){"use strict";t.d(e,{A:function(){return d},a:function(){return u}});var r=t(7297),i=t(87379),o=t(58538);function a(){var n=(0,r.Z)(["\n          color: ",";\n\n          &:hover,\n          &:focus {\n            color: ",";\n          }\n        "]);return a=function(){return n},n}function s(){var n=(0,r.Z)([""]);return s=function(){return n},n}function c(){var n=(0,r.Z)(["\n  ","\n  align-self: center;\n  position: relative;\n  margin-left: 24px;\n  cursor: pointer;\n  border: none;\n  background: transparent;\n  color: ",";\n\n  &[disabled] {\n    pointer-events: none;\n  }\n\n  &:hover,\n  &:focus {\n    color: ",";\n  }\n\n  ","\n"]);return c=function(){return n},n}function l(){var n=(0,r.Z)(["\n  &:before {\n    padding: 4px 6px;\n  }\n"]);return l=function(){return n},n}var u=i.ZP.button.withConfig({componentId:"sc-c4fba742-0"})(c(),o.ZT.xsPlain,(function(n){return n.theme.colors.contentsTertiary}),(function(n){return n.theme.colors.contentsPrimary}),(function(n){var e=n.theme;return n.highlighted?(0,i.iv)(a(),e.colors.contentsBlue1,e.colors.contentsBlue2):(0,i.iv)(s())})),d=i.ZP.i.withConfig({componentId:"sc-c4fba742-1"})(l())},19880:function(n,e,t){"use strict";var r=t(7297);function i(){var n=(0,r.Z)(["\n  border: none;\n  height: 1px;\n  opacity: 0.2;\n  background-color: ",";\n"]);return i=function(){return n},n}var o=t(87379).ZP.hr.withConfig({componentId:"sc-6f8306aa-0"})(i(),(function(n){return n.theme.colors.contentsDisabled}));e.Z=o},66111:function(n,e,t){"use strict";var r=t(7297);function i(){var n=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  background: none;\n  border: 1px solid ",";\n  box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.25);\n  border-radius: 4px;\n  overflow: auto;\n  cursor: ",";\n"]);return i=function(){return n},n}var o=t(87379).ZP.div.withConfig({componentId:"sc-2b2e83d9-0"})(i(),(function(n){return n.theme.colors.surface4}),(function(n){return n.isExpanded?"auto":"pointer"}));e.Z=o},75384:function(n,e,t){"use strict";t.d(e,{M:function(){return w}});var r=t(7297),i=t(85893),o=(t(67294),t(87379)),a=t(41741),s=t(40941),c=t(58538);function l(){var n=(0,r.Z)(["\n  margin-bottom: 2em;\n"]);return l=function(){return n},n}function u(){var n=(0,r.Z)(["\n  width: 50%;\n  min-width: 56px;\n  margin: 0 auto 10px;\n  border-radius: 50%;\n\n  "," {\n    width: ",";\n  }\n"]);return u=function(){return n},n}function d(){var n=(0,r.Z)(["\n  width: 75%;\n  margin: 0 auto 10px;\n"]);return d=function(){return n},n}function v(){var n=(0,r.Z)(["\n  width: 50%;\n  margin: 0 auto;\n"]);return v=function(){return n},n}var f=o.ZP.div.withConfig({componentId:"sc-28f20010-0"})(l()),h=(0,o.ZP)(s.ZP).withConfig({componentId:"sc-28f20010-1"})(u(),c.z2.SCREEN_SMALL,(function(n){return n.size===a.EF.Large?"120px":"50%"})),p=(0,o.ZP)(s.ZP).withConfig({componentId:"sc-28f20010-2"})(d()),g=(0,o.ZP)(s.ZP).withConfig({componentId:"sc-28f20010-3"})(v()),w=function(n){var e=n.size;return(0,i.jsxs)(f,{children:[(0,i.jsx)(h,{aspectRatio:1,size:e}),(0,i.jsx)(p,{height:"15px",width:"75%"}),(0,i.jsx)(g,{height:"10px"})]})}},21950:function(n,e,t){"use strict";var r=t(47568),i=t(26042),o=t(69396),a=t(7297),s=t(10092),c=t(85893),l=t(67294),u=t(87379),d=t(37769),v=t(55430),f=t(25509),h=t(60236),p=t(31639),g=t(85717),w=t(41581),m=t(33153),Z=t(53984),b=t(96595),x=t(29237),C=t(6150),E=t(1690);function I(){var n=(0,a.Z)(["\n  width: 100%;\n  text-align: right;\n"]);return I=function(){return n},n}function R(){var n=(0,a.Z)([void 0,void 0]);return R=function(){return n},n}var P=u.ZP.div.withConfig({componentId:"sc-80558a1c-0"})(I());e.Z=function(n){var e=n.isOpen,t=n.loading,a=n.setLoading,u=n.onClose,h=n.onCollectionCreated,I=(0,x.$G)(["common","channel"]).t,R=(0,g.D)().enqueueSnackbar,A=(0,l.useState)(""),T=A[0],y=A[1],k=(0,l.useState)(""),S=k[0],j=k[1],O=(0,l.useState)(!1),N=O[0],L=O[1],B=T.length>50,D=S.length>500,F=0===T.length||B||D,U={where:C.Z.ChannelPage.TopBanner.Collection.CREATE_COLLECTION_MODAL};(0,l.useEffect)((function(){e&&Z.Ar.sendImpressionEvent(U)}),[e]);var V=function(){y(""),j(""),L(!1)},z=function(){var n=(0,r.Z)((function(n){var e,t,r,c,l;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:n.preventDefault(),Z.Ar.sendClickEvent((0,o.Z)((0,i.Z)({},U),{what:C.Z.ChannelPage.TopBanner.Collection.CREATE_COLLECTION_SUBMIT})),a(!0),e=x.ag.language,s.label=1;case 1:return s.trys.push([1,3,,4]),t=(0,m.yd)(T),r=(0,m.yd)(S),c={title:t,description:r,isPrivate:N,locale:e},[4,E.Z.createCollection(c)];case 2:return l=s.sent(),Z.Ar.fireAnalyticsEvent(b.F.CHANNEL_PAGE.COLLECTION_CREATE_SUCCESS,U),V(),h(l),[3,4];case 3:return s.sent(),a(!1),R({message:I("channel:collection.modal.createCollectionError",{title:T})}),Z.Ar.fireAnalyticsEvent(b.F.CHANNEL_PAGE.COLLECTION_CREATE_FAIL,U),[3,4];case 4:return[2]}}))}));return function(e){return n.apply(this,arguments)}}();return(0,c.jsx)(f.Z,{children:(0,c.jsx)(v.MN,{modalDialogClassName:"new-collection-modal",isOpen:e,id:w.Z.ChannelPage.COLLECTION_MODAL_ID,title:I("channel:collection.modal.header"),onClose:function(){Z.Ar.sendClickEvent((0,o.Z)((0,i.Z)({},U),{what:C.Z.ChannelPage.TopBanner.Collection.CREATE_COLLECTION_DISMISS})),V(),u()},wide:!0,"data-section":"create_collection_popup",children:(0,c.jsxs)("form",{children:[(0,c.jsxs)(v.Pz,{children:[(0,c.jsx)(p.nv,{value:T,onChange:function(n){y(n.target.value)},label:I("channel:collection.modal.titleInput"),placeholder:I("channel:collection.modal.titleInput"),message:I(B?"channel:collection.modal.invalidTitle":"channel:collection.modal.titleInfo"),hasError:B,backgroundColorKey:"surface1","aria-label":I("channel:collection.modal.titleInput"),maxLength:50}),(0,c.jsx)(d.Z,{isPrivate:N,onSelect:function(n){L(0!==n)}})]}),(0,c.jsx)(v.SP,{children:(0,c.jsx)(v.Ug,{value:S,onChange:function(n){j(n.target.value)},label:I("channel:collection.modal.descriptionInput"),placeholder:I("channel:collection.modal.descriptionInput"),message:D?I("channel:collection.modal.invalidDescription"):"".concat(I("channel:collection.modal.characterCount"),": ").concat(S.length," / 500"),hasError:D,backgroundColorKey:"surface1","aria-label":I("channel:collection.modal.descriptionInput"),rows:10,maxLength:500})}),(0,c.jsx)(P,{children:(0,c.jsx)(_,{variant:"primary",onClick:z,type:"submit",isLoading:t,disabled:F,"data-what":"submit_button",children:I("common:core.submit")})})]})})})};var _=(0,u.ZP)(h.zx).withConfig({componentId:"sc-80558a1c-1"})(R(),"min-width: 120px")},99726:function(n,e,t){"use strict";var r=t(26042),i=t(69396),o=t(7297),a=t(85893),s=(t(67294),t(87379));function c(){var n=(0,o.Z)(["\n      color: ",";\n      opacity: ",";\n    "]);return c=function(){return n},n}function l(){var n=(0,o.Z)(["\n  position: relative;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  width: ",";\n  height: ",";\n  color: ",";\n  opacity: ",";\n\n  ","\n"]);return l=function(){return n},n}function u(){var n=(0,o.Z)(["\n  position: absolute;\n  font-size: ",";\n  transition: transform 0.2s ease-out, color 0.2s ease-in, opacity 0.2s end-step;\n  cursor: pointer;\n\n  :hover {\n    transform: scale(1.3);\n  }\n"]);return u=function(){return n},n}var d,v=s.ZP.div.withConfig({componentId:"sc-42bd7fd4-0"})(l(),(function(n){var e=n.iconFontSize;return"calc(".concat(e," * 2)")}),(function(n){var e=n.iconFontSize;return"calc(".concat(e," * 2)")}),(function(n){return n.theme.colors.contentsSecondary}),(function(n){return"aboveImage"!==n.variant?.3:null}),(function(n){return n.filled&&(0,s.iv)(c(),n.theme.colors.contentsYellow,"aboveImage"!==n.variant?1:null)})),f=s.ZP.i.withConfig({componentId:"sc-42bd7fd4-1"})(u(),(function(n){return n.iconFontSize}));e.Z=function(n){return(0,a.jsx)(v,(0,i.Z)((0,r.Z)({},n),{children:(0,a.jsx)(f,{className:"icon-star-empty",iconFontSize:null!==(d=n.iconFontSize)&&void 0!==d?d:"2em"})}))}},54938:function(n,e,t){"use strict";var r=t(7297),i=t(85893),o=t(67294),a=t(87379),s=t(99726);function c(){var n=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-top: 1.5em;\n  cursor: pointer;\n  z-index: 2;\n"]);return c=function(){return n},n}var l=a.ZP.div.withConfig({componentId:"sc-1f392810-0"})(c());e.Z=function(n){var e=n.className,t=void 0===e?"":e,r=n.initialRating,a=void 0===r?0:r,c=n.onRate,u=n.iconFontSize,d=void 0===u?"2em":u,v=n.iconVariant,f=void 0===v?"aboveImage":v,h=(0,o.useState)(a),p=h[0],g=h[1];return(0,i.jsx)(l,{className:t,children:[1,2,3,4,5,6,7,8,9,10].map((function(n){return(0,i.jsx)(s.Z,{filled:p>=n,onClick:function(){return g(e=n),void(c&&c(e));var e},iconFontSize:d,variant:f},n)}))})}},40941:function(n,e,t){"use strict";t.d(e,{YQ:function(){return f},qn:function(){return d}});var r=t(7297),i=t(87379);function o(){var n=(0,r.Z)(["\n  from {\n    opacity: 0.75;\n  }\n\n  50% {\n    opacity: 0.25;\n  }\n\n  to {\n    opacity: 0.75;\n  }\n"]);return o=function(){return n},n}function a(){var n=(0,r.Z)(["\n  animation: 1.5s ease-out 1.5s infinite ",";\n"]);return a=function(){return n},n}function s(){var n=(0,r.Z)(["\n      position: relative;\n\n      &:before {\n        display: block;\n        content: '';\n        padding-top: ","%;\n      }\n    "]);return s=function(){return n},n}function c(){var n=(0,r.Z)(["\n  width: ",";\n  height: ",";\n  background-color: ",";\n  margin: 0;\n  border-radius: 0.25em;\n  animation: 1.5s ease-out 1.5s infinite ",";\n\n  ","\n"]);return c=function(){return n},n}function l(){var n=(0,r.Z)(["\n  border: none;\n  height: 1px;\n  background-color: ",";\n  animation: 1.5s ease-out 1.5s infinite ",";\n"]);return l=function(){return n},n}var u=(0,i.F4)(o()),d=i.ZP.div.withConfig({componentId:"sc-14518efc-0"})(a(),u),v=i.ZP.div.withConfig({componentId:"sc-14518efc-1"})(c(),(function(n){return n.width||"100%"}),(function(n){return n.height||"auto"}),(function(n){return n.theme.colors.surface4}),u,(function(n){var e=n.aspectRatio;return e&&(0,i.iv)(s(),1/e*100)})),f=i.ZP.hr.withConfig({componentId:"sc-14518efc-2"})(l(),(function(n){return n.theme.colors.surface4}),u);e.ZP=v},29378:function(n,e,t){"use strict";t.d(e,{C_:function(){return h},MG:function(){return p},Ub:function(){return f}});var r=t(47568),i=t(29815),o=t(10092),a=t(85893),s=t(67294),c=t(85717),l=t(37688),u=t(29237),d=t(54118),v=s.createContext({followedChannels:[],setFollowing:(0,r.Z)((function(){return(0,o.__generator)(this,(function(n){return[2,!0]}))}))}),f=function(n){var e=n.initialValue,t=n.setCache,f=n.type,h=n.children,p=(0,l.a)().user,g=null!==p&&void 0!==p?p:{},w=g.id,m=g.token,Z=(0,s.useState)([]),b=Z[0],x=Z[1],C=(0,c.D)().enqueueSnackbar,E=(0,u.$G)(["common"]).t;(0,s.useEffect)((function(){if(e)x(e);else{var n=!1;if(Boolean(w&&m)){var i=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,d.ZP.fetchSubscribedChannels(f)];case 1:return e=r.sent().channelIds,n||(x(e),t&&t(f,e)),[3,3];case 2:return r.sent(),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return i(),function(){n=!0}}}}),[e,t,f,w,m]);var I=(0,s.useCallback)(function(){var n=(0,r.Z)((function(n,e){var r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),e?[4,d.ZP.subscribe(n)]:[3,2];case 1:return o.sent(),r=(0,i.Z)(b).concat([n]),[3,4];case 2:return[4,d.ZP.unsubscribe(n)];case 3:o.sent(),r=b.filter((function(e){return e!==n})),o.label=4;case 4:return x(r),t&&t(f,r),[2,!0];case 5:return o.sent(),C({message:E("common:errorModal:genericText")}),[2,!1];case 6:return[2]}}))}));return function(e,t){return n.apply(this,arguments)}}(),[C,b,t,E,f]);return(0,a.jsx)(v.Provider,{value:{followedChannels:b,setFollowing:I},children:h})},h=function(){var n=s.useContext(v);if(void 0===n)throw new Error("useChannelSubscriptionsContext must be used within a CollectionContextProvider");return n},p=function(n){var e=s.useContext(v);if(void 0===e)throw new Error("useChannelSubscriptionsContext must be used within a CollectionContextProvider");return e.followedChannels.includes(n)}},17214:function(n,e,t){"use strict";t.d(e,{O:function(){return r}});var r=function(n){return null===n||void 0===n?void 0:n.replace(/[\r\n]{3,}/g,"\n\n")}},87395:function(n,e,t){"use strict";t.d(e,{Z:function(){return s}});var r=t(51438),i=t(91177),o=function(){function n(e){(0,r.Z)(this,n),this.id=e.id,this.titles=e.titles,this.posterImage=e.posterImage,this.localisedTitle=e.localisedTitle}return n.fromApiData=function(e){var t,r,o,a;if(!e.id)return null;var s=null===(t=e.image)||void 0===t||null===(r=t.poster)||void 0===r?void 0:r.url,c=null===(o=e.image)||void 0===o||null===(a=o.poster)||void 0===a?void 0:a.source;return new n({id:e.id,titles:e.titles,posterImage:s?i.Z.createPosterImage(s,c):void 0,localisedTitle:e.i18n_title})},n}(),a=t(62011),s=function(){function n(e){(0,r.Z)(this,n),this.id=e.id,this.user=e.user,this.resource=e.resource,this.language=e.language,this.userContentRating=e.userContentRating,this.hiddenStatus=e.hiddenStatus,this.featured=e.featured,this.spoiler=e.spoiler,this.reviewNote=e.reviewNote,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.rank=e.rank,this.isFlagable=e.isFlagable,this.isVotable=e.isVotable,this.likes=e.likes,this.dislikes=e.dislikes,this.flagsTotal=e.flagsTotal,this.flagsInappropriate=e.flagsInappropriate,this.flagsAdvertisement=e.flagsAdvertisement,this.flagsSpoiler=e.flagsSpoiler}return n.fromApiData=function(e){var t,r,i,s,c,l,u,d,v,f,h,p,g,w,m,Z,b,x,C,E,I,R,P,_,A,T,y,k;return e.id?new n({id:e.id,user:e.user&&null!==(g=a.Z.fromApiData(e.user))&&void 0!==g?g:void 0,resource:e.resource&&null!==(w=o.fromApiData(e.resource))&&void 0!==w?w:void 0,language:e.language,userContentRating:null!==(m=e.user_content_rating)&&void 0!==m?m:0,hiddenStatus:null!==(Z=e.hidden_status)&&void 0!==Z&&Z,featured:null!==(b=e.featured)&&void 0!==b&&b,spoiler:null!==(x=e.spoiler)&&void 0!==x&&x,reviewNote:null!==(C=null===(t=e.review_notes)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.text)&&void 0!==C?C:void 0,createdAt:e.created_at?new Date(e.created_at):void 0,updatedAt:e.updated_at?new Date(e.updated_at):void 0,rank:null!==(E=e.rank)&&void 0!==E?E:0,isFlagable:null===(I=e.is_flagable)||void 0===I||I,isVotable:null===(R=e.is_votable)||void 0===R||R,likes:null!==(P=null===(i=e.stats)||void 0===i?void 0:i.likes)&&void 0!==P?P:0,dislikes:null!==(_=null===(s=e.stats)||void 0===s?void 0:s.dislikes)&&void 0!==_?_:0,flagsTotal:null!==(A=null===(c=e.stats)||void 0===c||null===(l=c.flags)||void 0===l?void 0:l.total)&&void 0!==A?A:0,flagsInappropriate:null!==(T=null===(u=e.stats)||void 0===u||null===(d=u.flags)||void 0===d?void 0:d.inappropriate)&&void 0!==T?T:0,flagsAdvertisement:null!==(y=null===(v=e.stats)||void 0===v||null===(f=v.flags)||void 0===f?void 0:f.advertisement)&&void 0!==y?y:0,flagsSpoiler:null!==(k=null===(h=e.stats)||void 0===h||null===(p=h.flags)||void 0===p?void 0:p.spoiler)&&void 0!==k?k:0}):null},n.fromApiDataList=function(e){var t=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value,l=n.fromApiData(c);if(!l)return null;t.push(l)}}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t},n}()},18072:function(n,e,t){"use strict";t.d(e,{T:function(){return f}});var r=t(47568),i=t(51438),o=t(52951),a=t(14924),s=t(10092),c=t(33092),l=t(89716),u=t(29237),d=t(41581),v=t(40781),f={UNSANITIZED_CONTENT:"ReviewsRepositoryError_unsanitized_content",RESPONSE_WITHOUT_ID:"ReviewsRepositoryError_response_without_id",VOTES_ERROR:"ReviewsRepositoryError_Votes",FLAGS_ERROR:"ReviewsRepositoryError_Flags"},h=function(){function n(){(0,i.Z)(this,n)}return(0,o.Z)(n,null,[{key:"createReview",value:function(e,t){return(0,r.Z)((function(){var r,i,o,a,h,p;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:r={method:"POST",url:"/api/reviews",data:{resource_id:e,language:u.ag.language,user_content_rating:t.userContentRating,review_note:t.reviewNote,spoiler:t.spoiler}},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,c.So)(r)];case 2:if(!(null===(o=s.sent())||void 0===o||null===(i=o.data)||void 0===i?void 0:i.id))throw new Error("Response does not include a review id");return[2,o];case 3:throw a=s.sent(),l.Z.log({error:a,component:n.displayName,action:"createReview",context:{data:{containerId:e,language:u.ag.language,userContentRating:t.userContentRating,reviewNote:t.reviewNote,spoiler:t.spoiler},error:"ReviewsRepository: Failed to create a review"}}),h=v.Z.getErrorMessage(a),p=h.includes(d.Z.ErrorIdentifier.UNSANITIZED_CONTENT)?f.UNSANITIZED_CONTENT:v.Z.getCommonError(a),new Error(p);case 4:return[2]}}))}))()}},{key:"editReview",value:function(e){return(0,r.Z)((function(){var t,r,i,o;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:t={method:"PATCH",url:"/api/reviews/".concat(e.id),data:{language:u.ag.language,user_content_rating:e.userContentRating,review_note:e.reviewNote,spoiler:e.spoiler}},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,c.So)(t)];case 2:return[2,a.sent()];case 3:throw r=a.sent(),l.Z.log({error:r,component:n.displayName,action:"editReview",context:{error:"ReviewsRepository: Failed to edit a review",data:{reviewId:e.id,language:u.ag.language,userContentRating:e.userContentRating,reviewNote:e.reviewNote,spoiler:e.spoiler}}}),i=v.Z.getErrorMessage(r),o=i.includes(d.Z.ErrorIdentifier.UNSANITIZED_CONTENT)?f.UNSANITIZED_CONTENT:v.Z.getCommonError(r),new Error(o);case 4:return[2]}}))}))()}},{key:"deleteReview",value:function(e){return(0,r.Z)((function(){var t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:t={method:"DELETE",url:"/api/reviews/".concat(e)},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,c.So)(t)];case 2:return[2,o.sent()];case 3:throw r=o.sent(),l.Z.log({error:r,component:n.displayName,action:"deleteReview",context:{error:"ReviewsRepository: Failed to delete a review",data:{reviewId:e}}}),i=v.Z.getCommonError(r),new Error(i);case 4:return[2]}}))}))()}},{key:"getFlags",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,r.Z)((function(){var r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:r={method:"GET",url:"/api/flags",params:{resourceIds:e.join(","),resourceType:"review",perPage:30,page:t}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,c.So)(r)];case 2:return[2,o.sent()];case 3:throw i=o.sent(),l.Z.log({error:i,component:n.displayName,action:"getFlags",context:{error:"ReviewsRepository: Failed to get user's own flags for reviews",params:{reviewIds:e.join(",")}}}),new Error(f.FLAGS_ERROR);case 4:return[2]}}))}))()}},{key:"postFlag",value:function(e,t){return(0,r.Z)((function(){var r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:r={method:"POST",url:"/api/flags",data:{resource_id:e,flag:t}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,c.So)(r)];case 2:return[2,o.sent()];case 3:return i=o.sent(),l.Z.log({error:i,component:n.displayName,action:"postFlag",context:{error:"ReviewsRepository: Failed to flag a review",data:{reviewId:e,flag:t}}}),[2,i];case 4:return[2]}}))}))()}},{key:"getVotes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,r.Z)((function(){var r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:r={method:"GET",url:"/api/reviews/votes",params:{reviewIds:e.join(","),perPage:30,page:t}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,c.So)(r)];case 2:return[2,o.sent()];case 3:throw i=o.sent(),l.Z.log({error:i,component:n.displayName,action:"getVotes",context:{error:"ReviewsRepository: Failed to get user's own votes for reviews",params:{reviewIds:e.join(",")}}}),new Error(f.VOTES_ERROR);case 4:return[2]}}))}))()}},{key:"patchVote",value:function(e,t){return(0,r.Z)((function(){var r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:r={method:"PATCH",url:"/api/reviews/votes",data:{review_id:e,like:t}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,c.So)(r)];case 2:return[2,o.sent()];case 3:return i=o.sent(),l.Z.log({error:i,component:n.displayName,action:"patchVote",context:{error:"ReviewsRepository: Failed to vote for a review",data:{review_id:e,like:t}}}),[2,i];case 4:return[2]}}))}))()}},{key:"deleteVote",value:function(e){return(0,r.Z)((function(){var t,r;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:t={method:"DELETE",url:"/api/reviews/votes",data:{review_id:e}},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,c.So)(t)];case 2:return[2,i.sent()];case 3:return r=i.sent(),l.Z.log({error:r,component:n.displayName,action:"deleteVote",context:{error:"ReviewsRepository: Failed to remove vote for a review",data:{reviewId:e}}}),[2,r];case 4:return[2]}}))}))()}}]),n}();(0,a.Z)(h,"displayName","ReviewsRepository"),e.Z=h},35818:function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEDSURBVHgB7duxCcJQFIXhP2KXARzAKXQisbV3Ay3FUdwgvb0DpDd1vBfBPnmCPM/54ILd1d+keGIa3lYxh5h1TMsE4zhSomkaSszc38VcY3ef2/PDX5j4wQvfwMePAqQhZp/bjzFbZqo4QLrn9hsFKg8wLNDWqgfAARDnAIhzAMQ5AOIcAHHLyg8zxft9CyDOARDnAIhzAMQ5AOIcAHEOgDj/HlD7eb50v28BxDkA4hwAcQ6AOAdAnAMgzgEQt+SPzDka+/8BiHMAxDkA4hwAcQ6AOAdAXAYYEJYBHujqMsAJzavgST5Bnq/iSJpPkO9iNkz05ePw5LPxjP35ZedVf47pX+BZRnjjOve0AAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=54710-6c2f53a48f0dda49.js.map