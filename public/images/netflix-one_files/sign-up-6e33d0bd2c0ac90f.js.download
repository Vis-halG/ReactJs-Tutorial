(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35801],{12295:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sign-up",function(){return r(75473)}])},35874:function(n,e,r){"use strict";r.d(e,{m:function(){return y}});var t=r(47568),o=r(14924),a=r(26042),i=r(69396),c=r(828),s=r(7297),u=r(10092),l=r(85893),d=r(67294),p=r(11752),g=r.n(p),m=r(87379),f=r(21322),h=r.n(f),S=r(86684),v=r(81354),T=r(56998),I=r(89716),A=r(53984),Z=r(96595),w=r(37426),C=r(9778),x=r(27637),N=r(9739),b=r(29237),E=r(6150),U=r(87296),F=r(26193);function _(){var n=(0,s.Z)(["\n  margin-bottom: 8px;\n"]);return _=function(){return n},n}function k(){var n=(0,s.Z)(["\n  margin-bottom: 8px;\n"]);return k=function(){return n},n}var R={name:"",email:"",password:"",emailNewsletter:"false",csrfToken:void 0},j=g()().publicRuntimeConfig,O=(0,m.ZP)(v.by).withConfig({componentId:"sc-a41c3586-0"})(_()),P=(0,m.ZP)(v.Rx).withConfig({componentId:"sc-a41c3586-1"})(k());function y(n){var e=n.onBeforeSubmit,r=n.onSignUpSuccess,s=n.onSignUpFailure,p=n.redirectTo,g=n.onForcedRegModal,m=void 0!==g&&g,f=n.vkalSection,_=n.className,k=(0,b.$G)(["common"]).t,y=(0,w.kP)().updateSession,B=(0,d.useState)(R),G=B[0],L=B[1],H=(0,d.useState)(!1),D=H[0],q=H[1],K=(0,d.useState)(!1),M=K[0],V=K[1],$=(0,d.useState)(!1),W=$[0],X=$[1],z=(0,d.useState)(null),J=z[0],Q=z[1],Y=(0,c.Z)((0,x.Z)(),2),nn=(Y[0],Y[1]),en=(0,C.F)(),rn=(0,N.o)("false"),tn=m?E.Z.ForcedRegistration.SIGNUP_POPUP:E.Z.Authentication.EMAIL_SIGN_UP,on=(0,d.useMemo)((function(){var n;return G.password?null===(n=h()(G.password))||void 0===n?void 0:n.score:null}),[G.password]),an=W||!!J||""===G.email||""===G.password||""===G.name;(0,d.useEffect)((function(){A.Ar.sendImpressionEvent({where:tn})}),[tn]),(0,d.useEffect)((function(){L((function(n){return(0,i.Z)((0,a.Z)({},n),{emailNewsletter:rn,csrfToken:en})}))}),[rn,en]),(0,d.useEffect)((function(){(0,T.SI)(G.password,on)||X(!0)}),[G.password,on]);var cn=(0,d.useCallback)((function(){var n=!0;return G.email&&!(0,T.vV)(G.email)&&(Q(k("common:account.errors.invalidEmail")),n=!1),(0,T.SI)(G.password,on)||(X(!0),n=!1),n}),[G,on,k]),sn=(0,d.useCallback)((function(n,e){if(G[n]!==e){var r=(0,a.Z)({},G,(0,o.Z)({},n,e));L(r),"email"===n&&J?Q(null):"password"===n&&W&&X(!1)}}),[J,G,W]),un=(0,d.useCallback)((function(n){n.preventDefault(),e&&e();var o=E.Z.Authentication.VIKI;if(A.Ar.sendClickEvent((0,a.Z)({what:E.Z.Authentication.CONTINUE_BUTTON,where:tn},m&&{section:f,method:o})),cn()){if(!globalThis.grecaptcha)return s(U.F.SignUp,S.ZB.Recaptcha),void I.Z.log({error:new Error("Recaptcha Error."),component:"SignUpForm",action:"handleSubmit",context:{error:"Error loading recaptcha"}});q(!0),grecaptcha.enterprise.ready((0,t.Z)((function(){return(0,u.__generator)(this,(function(n){return grecaptcha.enterprise.execute(j.auth.reCAPTCHA.publicKey,{action:"signup"}).then(function(){var n=(0,t.Z)((function(n){var e,t,c,l;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:if(void 0===G.csrfToken)throw new Error("CSRF token is missing");u.label=1;case 1:return u.trys.push([1,5,,6]),e=(0,i.Z)((0,a.Z)({},G),{language:b.ag.language,agreeTocPrivacy:"1",csrfToken:G.csrfToken,gRecaptchaResponse:n,redirect:p}),[4,F.ZP.createUser(e)];case 2:return t=u.sent(),q(!1),"undefined"===typeof y?[3,4]:[4,y(t)];case 3:u.sent(),u.label=4;case 4:return A.Ar.fireAnalyticsEvent(Z.F.AUTHENTICATION.REGISTRATION,{method:o}),nn(!1),r(U.F.SignUp,t),[3,6];case 5:return c=u.sent(),l=c,A.Ar.fireAnalyticsEvent(Z.F.AUTHENTICATION.REGISTRATION_FAIL,{method:o,error_message:l.message}),l.message===S.ZB.SignUpLinkedAccount&&Q(k("common:account.errors.emailConnected")),q(!1),s(U.F.SignUp,l.message),[3,6];case 6:return[2]}}))}));return function(e){return n.apply(this,arguments)}}(),(function(n){q(!1),A.Ar.fireAnalyticsEvent(Z.F.AUTHENTICATION.REGISTRATION_FAIL,{method:o,error_message:S.ZB.Recaptcha}),s(U.F.SignUp,S.ZB.Recaptcha),I.Z.log({error:new Error("Recaptcha Error."),component:"SignUpForm",action:"handleSubmit",context:{error:n}})})),[2]}))})))}}),[G,s,r,e,p,nn,k,y,cn,tn,f,m]);return(0,l.jsxs)(v.Gq,{onSubmit:un,className:_,children:[(0,l.jsx)(v.tH,{label:k("common:account.name"),placeholder:k("common:account.name"),value:G.name,required:!0,autoFocus:!0,onChange:function(n){return sn("name",n.target.value)}}),(0,l.jsx)(v.s8,{value:G.email,onChange:sn,error:J,onBlur:cn,helperText:k("common:account.emailHelperText")}),(0,l.jsx)(v.ZI,{required:!0,name:"password",label:k("common:account.password"),placeholder:k("common:account.password"),value:G.password,error:W&&!m?(0,l.jsx)(P,{}):void 0,showPasswordTooltip:M&&(""===G.password||W)&&m,onChange:function(n){sn("password",n.target.value)},onBlur:function(){cn(),V(!1)},onFocus:function(){V(!0),m&&A.Ar.sendClickEvent({what:E.Z.ForcedRegistration.PASSWORD_BAR,where:tn,section:f})},passwordStrength:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(O,{strength:on}),""!==G.password&&(0,l.jsx)(v.Gh,{strength:on,highlight:!!W})]})}),"true"!==rn&&(0,l.jsx)(v.uZ,{value:G.emailNewsletter,onChange:sn}),(0,l.jsx)(v.Sn,{variant:"primary",isLoading:D,disabled:an,children:k(m?"common:account.createAccount":"common:account.continue")}),!m&&(0,l.jsx)(v.K5,{})]})}},19784:function(n,e,r){"use strict";var t=r(47568),o=r(7297),a=r(10092),i=r(85893),c=r(67294),s=r(87379),u=r(86684),l=r(59726),d=r(45422),p=r(17893),g=r(30136),m=r(89716),f=r(53984),h=r(96595),S=r(37426),v=r(9739),T=r(87296),I=r(26193);function A(){var n=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  align-items: center;\n  margin-top: ",";\n"]);return A=function(){return n},n}var Z=s.ZP.div.withConfig({componentId:"sc-20cc274a-0"})(A(),(function(n){return n.isSignUp?"0":"12px"}));e.Z=function(n){var e=n.isSignUp,r=void 0!==e&&e,o=n.onStateChange,s=n.onSignInSuccess,A=n.onSignInFailure,w=(0,S.kP)().updateSession,C=(0,c.useState)(null),x=C[0],N=C[1],b=(0,v.o)("false"),E=(0,c.useCallback)((function(n){N(n),"function"===typeof o&&o(n)}),[o]),U=(0,c.useCallback)(function(){var n=(0,t.Z)((function(n,e){var t,o,i;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return E(null),N(null),w?[4,w(e)]:[3,2];case 1:a.sent(),a.label=2;case 2:if(t=null===e||void 0===e?void 0:e.user,o=r?h.F.AUTHENTICATION.REGISTRATION:h.F.AUTHENTICATION.LOGIN,f.Ar.fireAnalyticsEvent(o,{method:n}),!(null===t||void 0===t?void 0:t.isNewUser))return[3,6];a.label=3;case 3:return a.trys.push([3,5,,6]),[4,I.ZP.updateUser({emailNewsletter:b})];case 4:return a.sent(),[3,6];case 5:return i=a.sent(),m.Z.log({component:"SocialSignIn",action:"handleSignInSuccess",context:{error:i}}),[3,6];case 6:return s(n,e),[2]}}))}));return function(e,r){return n.apply(this,arguments)}}(),[E,w,r,s,b]),F=(0,c.useCallback)((function(n,e){if(E(null),e!==u.ZB.PopUpClosedByUser){var t=r?h.F.AUTHENTICATION.REGISTRATION_FAIL:h.F.AUTHENTICATION.LOGIN_FAIL;f.Ar.fireAnalyticsEvent(t,{method:n,error_message:e}),A(n,e)}}),[E,r,A]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(Z,{isSignUp:r,children:[(0,i.jsx)(p.Z,{onClick:E,onSignInSuccess:U,onSignInFailure:F}),(0,i.jsx)(d.Z,{disabled:null!==x&&x!==T.F.Facebook,onClick:E,onSignInSuccess:U,onSignInFailure:F}),(0,i.jsx)(l.Z,{disabled:null!==x&&x!==T.F.Apple,onClick:E,onSignInSuccess:U,onSignInFailure:F}),(0,i.jsx)(g.Z,{disabled:null!==x&&x!==T.F.Rakuten,onClick:E,onSignInSuccess:U,onSignInFailure:F})]})})}},75473:function(n,e,r){"use strict";r.r(e),r.d(e,{__N_SSP:function(){return F},default:function(){return _}});var t=r(47568),o=r(10092),a=r(85893),i=r(67294),c=r(87296),s=r(81354),u=r(7297),l=r(87379),d=r(52245),p=r(35874),g=r(19784),m=r(58538),f=r(53984),h=r(29237),S=r(6150),v=r(41940);function T(){var n=(0,u.Z)(["\n  path {\n    fill: ",";\n  }\n"]);return T=function(){return n},n}var I=(0,l.ZP)(v.Z).withConfig({componentId:"sc-3ffa4c6-0"})(T(),m.wL.light.contentsPrimary),A=function(n){var e=n.onSignUpSuccess,r=n.onSignUpFailure,t=n.redirectTo,o=(0,h.$G)(["common"]).t,c=(0,i.useState)(!1),u=c[0],l=c[1],v=(0,i.useState)(null),T=v[0],A=v[1],Z=(0,i.useCallback)((function(){f.Ar.sendClickEvent({what:S.Z.Authentication.EMAIL_BUTTON}),l(!0)}),[]),w=o("common:account.authentication",{loginType:"Email"}),C=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.pd,{children:(0,a.jsx)(s.K5,{})}),(0,a.jsx)(g.Z,{isSignUp:!0,onStateChange:function(n){A(n)},onSignInSuccess:e,onSignInFailure:r}),(0,a.jsx)(d.C,{title:w,icon:I,text:w,disabled:!!T,onClick:Z})]});return u&&(C=(0,a.jsx)(p.m,{onSignUpSuccess:e,onSignUpFailure:r,redirectTo:t})),(0,a.jsxs)(s.pm,{children:[(0,a.jsx)(s.Dx,{variant:m.ZT.lEmphasis,children:o("common:account.createAccount")}),C]})},Z=r(92528),w=r(86684),C=r(7307),x=r(5909),N=r(86642),b=r(85717),E=r(34177),U=function(n){var e=n.redirectTo,r=(0,i.useState)(null),u=r[0],l=r[1],d=(0,b.D)().enqueueSnackbar,p=(0,h.$G)(["onboarding"]).t,g=(0,i.useCallback)(function(){var n=(0,t.Z)((function(n,r){var t,a,i,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return i="/",e&&!e.includes("/reset-password")&&(i=e),s=x.Ax.get(x.hp.RETURN_TO),x.Ax.remove(x.hp.RETURN_TO),s&&n===c.F.Rakuten&&(i=s),u=null===(t=globalThis.location)||void 0===t?void 0:t.origin,N.Z.isAbsoluteUrl(i)?[4,N.Z.isWhitelistedDomain(i)]:[3,2];case 1:return u=o.sent()?i:"/",[3,3];case 2:u=N.Z.replacePath(u,i||"/"),o.label=3;case 3:return(null===r||void 0===r||null===(a=r.user)||void 0===a?void 0:a.isNewUser)&&(u=N.Z.appendNewRegistrationParam(u),d({message:p("onboarding:snackbar.accountCreated")})),u=globalThis.location.hash?N.Z.addHashToPath(u,globalThis.location.hash.replace("#","")):u,(0,C.Z6)({url:decodeURIComponent(u),external:!0}),[2]}}))}));return function(e,r){return n.apply(this,arguments)}}(),[d,e,p]),m=(0,i.useCallback)((function(n,e){x.Ax.remove(x.hp.RETURN_TO),e!==w.ZB.SignUpLinkedAccount&&l({loginType:n,error:e})}),[]);return(0,a.jsxs)(s.FE,{customCta:"signIn",children:[(0,a.jsx)(Z.Z,{}),(0,a.jsx)(A,{onSignUpSuccess:g,onSignUpFailure:m,redirectTo:e||"/"}),(0,a.jsx)(w.Cv,{isOpen:!!u,loginType:null===u||void 0===u?void 0:u.loginType,error:null===u||void 0===u?void 0:u.error,onClose:function(n){return l(null)}})]})};U.hideNavBar=!0,U.pageTitle=E.V1.Signup;var F=!0,_=U}},function(n){n.O(0,[41130,21322,49774,92888,40179],(function(){return e=12295,n(n.s=e);var e}));var e=n.O();_N_E=e}]);
//# sourceMappingURL=sign-up-6e33d0bd2c0ac90f.js.map