"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25398],{88517:function(e,r,t){var n,o=t(67294),a=["title","titleId"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s.apply(null,arguments)}var i=function(e,r){var t=e.title,i=e.titleId,c=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==r.indexOf(n))continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],-1===r.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,a);return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",ref:r,"aria-labelledby":i},c),t?o.createElement("title",{id:i},t):null,n||(n=o.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.45 3.992a3.417 3.417 0 0 0-3.411 3.414v3.005a.72.72 0 0 1-.718.719h-.555a.72.72 0 0 1-.718-.719l-.001-3.004A5.41 5.41 0 0 1 11.448 2a5.41 5.41 0 0 1 5.408 5.402v3.009a.72.72 0 0 1-.718.719h-.555a.72.72 0 0 1-.718-.719l-.001-3.008a3.417 3.417 0 0 0-3.414-3.411m5.957 7.785a1.853 1.853 0 0 1 1.855 1.856l.005 6.504a1.856 1.856 0 0 1-1.856 1.856L5.86 22a1.856 1.856 0 0 1-1.856-1.856L4 13.64a1.86 1.86 0 0 1 1.856-1.857z",clipRule:"evenodd"})))},c=(0,o.forwardRef)(i),l=(0,o.memo)(c);r.Z=l},54118:function(e,r,t){t.d(r,{ZP:function(){return d},_g:function(){return n}});var n,o=t(47568),a=t(51438),s=t(10092),i=t(33092),c=t(89716),l="ChannelSubscriptionError_fetchSubscribed",u="ChannelSubscriptionError_subscribe",p="ChannelSubscriptionError_unsubscribe";!function(e){e.Container="container",e.List="list",e.Person="person",e.Series="series",e.Movies="film",e.News="news"}(n||(n={}));var d=function(){function e(){(0,a.Z)(this,e)}return e.fetchSubscribedChannels=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.Container,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true";return(0,o.Z)((function(){var n,o;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,i.So)({url:e.endpoint,method:"GET",params:{type:r,ids:t}})];case 1:return n=a.sent(),[2,{channelIds:n.data}];case 2:throw o=a.sent(),c.Z.log({error:o,component:e.displayName,action:"fetchSubscribedChannels"}),new Error(l);case 3:return[2]}}))}))()},e.subscribe=function(r){return(0,o.Z)((function(){var t;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,i.So)({url:e.endpoint,method:"POST",data:{resource_id:r}})];case 1:return n.sent(),[3,3];case 2:throw t=n.sent(),c.Z.log({error:t,component:e.displayName,action:"subscribe",context:{resourceId:r}}),new Error(u);case 3:return[2]}}))}))()},e.unsubscribe=function(r){return(0,o.Z)((function(){var t;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,i.So)({url:e.endpoint,method:"DELETE",data:{resource_id:r}})];case 1:return n.sent(),[3,3];case 2:throw t=n.sent(),c.Z.log({error:t,component:e.displayName,action:"unsubscribe",context:{resourceId:r}}),new Error(p);case 3:return[2]}}))}))()},e.fetchFollowingData=function(r){return(0,o.Z)((function(){var t,n,o,a,l,u,p,d;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:t=r.type,n=r.userId,o=r.per_page,a=r.page,s.label=1;case 1:return s.trys.push([1,3,,4]),l={type:t},o&&(l.per_page=o),a&&(l.page=a),u="users/".concat(n,"/subscriptions.json"),[4,i.hi.send(u,{method:"GET",params:l})];case 2:return[2,[{hasMore:(p=s.sent()).more,items:p.response},null]];case 3:return d=s.sent(),c.Z.log({err:d,component:e.displayName,action:"fetchFollowingData",context:{type:t,userId:n}}),[2,[null,d]];case 4:return[2]}}))}))()},e}();d.displayName="ChannelSubscriptionRepository",d.endpoint="/api/users/current/channel_subscriptions"},1690:function(e,r,t){t.d(r,{Z:function(){return b}});var n=t(47568),o=t(51438),a=t(14924),s=t(26042),i=t(69396),c=t(10092),l=t(33092),u=t(41581),p=t(79668),d=t(89716),h=t(11466),g=t(29237),f=t(43416),m=t(75688),v=t(40781),w="CollectionRepositoryError_flagCollection",Z="CollectionRepositoryError_deleteCollection",_="CollectionRepositoryError_updateResource",b=function(){function e(){(0,o.Z)(this,e)}return e.getCurrentUserCollections=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.Z.Collection.DEFAULT_PER_PAGE;return(0,n.Z)((function(){var n,i,u,g,w,Z,_,b,y,E;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(n=p.Z.userInfo(),i=n.id,u=n.token,!i)return[2,null];c.label=1;case 1:return c.trys.push([1,3,,4]),g="users/".concat(i,"/user-lists.json"),w=(0,s.Z)({token:u,page:o,per_page:a},r),t&&(w=h.z.addTvodParameter(g,w)),[4,l.hi.send(g,{params:w})];case 2:return Z=c.sent(),_=Z.response,b=Z.more,[2,{collections:f.ZP.fromApiDataList(_),hasMore:!!b}];case 3:throw y=c.sent(),(E=v.Z.getCommonError(y))!==m.H.NetworkError&&d.Z.log({error:y,component:e.displayName,action:"getCurrentUserCollections",context:{userId:i}}),new Error(E);case 4:return[2]}}))}))()},e.getCollectionsByContainer=function(r,t){return(0,n.Z)((function(){var n,o,a,s,i,u,g,w;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(n=p.Z.userInfo(),o=n.id,a=n.token,!o)return[2,null];c.label=1;case 1:return c.trys.push([1,3,,4]),s="user-lists.json",i={token:a,resource_id:r},t&&(i=h.z.addTvodParameter(s,i)),[4,l.hi.send(s,{apiVersion:"v5",params:i})];case 2:return u=c.sent().results,[2,f.ZP.fromApiDataList(u)];case 3:throw g=c.sent(),(w=v.Z.getCommonError(g))!==m.H.NetworkError&&d.Z.log({error:g,component:e.displayName,action:"getCollectionsByContainer",context:{userId:o,containerId:r}}),new Error(w);case 4:return[2]}}))}))()},e.getCollection=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return(0,n.Z)((function(){var n,a,s,i,u,h,g,f,w,Z,_,b;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:n=p.Z.userInfo(o).token,c.label=1;case 1:return c.trys.push([1,3,,4]),a=t.page,s=void 0===a?1:a,i=t.perPage,u={params:{per_page:void 0===i?12:i,page:s,with_paging:"true",token:n,t:Math.floor((new Date).getTime()/1e3),skip_invalid_tvod:"true"}},[4,l.hi.send("user-lists/".concat(r,".json"),u,o)];case 2:return h=c.sent(),g=h.details,f=h.response,w=h.more,[2,{collection:e.buildCollectionFromApiData(g,f),hasNextPage:w,apiData:{collectionData:g,collectionContainers:f}}];case 3:throw Z=c.sent(),(b=v.Z.getCommonError(Z))!==m.H.NetworkError&&b!==m.H.NotFound&&401!==(null===Z||void 0===Z||null===(_=Z.body)||void 0===_?void 0:_.vcode)&&d.Z.log({error:Z,component:e.displayName,action:"getCollection",context:{userId:r}}),new Error(b);case 4:return[2]}}))}))()},e.addResource=function(r,t){return(0,n.Z)((function(){var n,o,a;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:n={method:"PATCH",url:"/api/collections/".concat(r,"/items"),data:{resource_id:t}},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,l.So)(n)];case 2:return s.sent(),[2];case 3:throw o=s.sent(),(a=v.Z.getCommonAxiosError(o))!==m.H.NetworkError&&d.Z.log({error:o,component:e.displayName,action:"addResource",context:{collectionId:r,resourceId:t}}),new Error(a);case 4:return[2]}}))}))()},e.deleteResource=function(r,t){return(0,n.Z)((function(){var n,o,a;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:n={method:"DELETE",url:"/api/collections/".concat(r,"/items"),data:{resource_id:t}},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,l.So)(n)];case 2:return s.sent(),[2];case 3:throw o=s.sent(),(a=v.Z.getCommonAxiosError(o))!==m.H.NetworkError&&d.Z.log({error:o,component:e.displayName,action:"deleteResource",context:{collectionId:r,resourceId:t}}),new Error(a);case 4:return[2]}}))}))()},e.updateResource=function(r,t,o,a){return(0,n.Z)((function(){var n,s;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:n={method:"PATCH",url:"/api/collections/".concat(r,"/items"),data:{resource_id:t,description:o,language:a}},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,l.So)(n)];case 2:return i.sent(),[2];case 3:throw s=i.sent(),d.Z.log({error:s,component:e.displayName,action:"updateResource",context:{error:"CollectionRepository: Failed to update resource",data:{collectionId:r,resourceId:t}}}),new Error(_);case 4:return[2]}}))}))()},e.createCollection=function(r){return(0,n.Z)((function(){var t,n,o,u,h,w,Z,_,b,y,E,C;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(t=r.title,n=r.description,o=r.isPrivate,u=r.resourceType,h=void 0===u?f._g.Container:u,w=r.locale,Z=void 0===w?g.ag.language:w,!(_=p.Z.userInfo().id))return[2,null];b={titles:(0,a.Z)({},Z,t),descriptions:(0,a.Z)({},Z,n),privacy:o?f.iY.Private:f.iY.Public,resource_type:h},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,(0,l.So)({method:"POST",url:"/api/collections",data:b})];case 2:return y=c.sent().data,[2,f.ZP.fromApiData((0,i.Z)((0,s.Z)({},b),{id:y.id}))];case 3:throw E=c.sent(),(C=v.Z.getCommonAxiosError(E))!==m.H.NetworkError&&d.Z.log({error:E,component:e.displayName,action:"createCollection",context:(0,i.Z)((0,s.Z)({},b),{locale:Z,userId:_})}),new Error(C);case 4:return[2]}}))}))()},e.editCollection=function(r,t){var o=t.title,u=t.privacy,p=t.description,h=t.coverImgBase64,f=t.locale,w=void 0===f?g.ag.language:f;return(0,n.Z)((function(){var t,n,g,f;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(t="/api/collections/".concat(r),n=(0,s.Z)({},o&&{titles:(0,a.Z)({},w,o)},p&&{descriptions:(0,a.Z)({},w,p)},h&&{cover_image:h},u&&{privacy:u}),!Object.keys(n).length)return[2];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,l.So.patch(t,n)];case 2:return c.sent(),[3,4];case 3:throw g=c.sent(),(f=v.Z.getCommonAxiosError(g))!==m.H.NetworkError&&d.Z.log({error:g,component:e.displayName,action:"editCollection",context:(0,i.Z)((0,s.Z)({},n),{locale:w})}),new Error(f);case 4:return[2]}}))}))()},e.buildCollectionFromApiData=function(e,r){var t=f.ZP.fromApiData(e);return t&&r&&t.setResources(r),t},e.getVikiCollections=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)((function(){var t,n,o,a,s,i,u,p,h,g;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:t="129527l",n=r.page,o=void 0===n?1:n,a=r.perPage,s=void 0===a?12:a,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,l.hi.send("lists/".concat(t,".json"),{params:{page:o,per_page:s,with_paging:!0}})];case 2:return i=c.sent(),u=i.more,p=i.response,[2,{collections:f.ZP.fromApiDataList(p.map((function(e){return e.resource}))),more:u}];case 3:throw h=c.sent(),(g=v.Z.getCommonError(h))!==m.H.NetworkError&&d.Z.log({error:h,component:e.displayName,action:"getVikiCollections"}),new Error(g);case 4:return[2]}}))}))()},e.getUserCollections=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,n.Z)((function(){var n,o,a,s,i,u,p,h,g;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:n=r.page,o=void 0===n?1:n,a=r.perPage,s=void 0===a?12:a,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,l.hi.send("user-lists.json",{params:{page:o,per_page:s,with_paging:!0,list_type:"user",resource_type:"container",sort:t,with_items:!0}})];case 2:return i=c.sent(),u=i.more,p=i.response,[2,{collections:f.ZP.fromApiDataList(p),more:u}];case 3:throw h=c.sent(),(g=v.Z.getCommonError(h))!==m.H.NetworkError&&d.Z.log({error:h,component:e.displayName,action:"getUserCollections"}),new Error(g);case 4:return[2]}}))}))()},e.postFlag=function(r,t){return(0,n.Z)((function(){var n,o;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:n={method:"POST",url:"/api/flags",data:{resource_id:r,flag:t}},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,l.So)(n)];case 2:return[2,a.sent()];case 3:throw o=a.sent(),d.Z.log({error:o,component:e.displayName,action:"postFlag",context:{error:"CollectionRepository: Failed to report collection",data:{collectionId:r,flag:t}}}),new Error(w);case 4:return[2]}}))}))()},e.deleteCollection=function(r){return(0,n.Z)((function(){var t,n;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:t={method:"DELETE",url:"/api/collections/".concat(r)},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,l.So)(t)];case 2:return o.sent(),[3,4];case 3:throw n=o.sent(),d.Z.log({error:n,component:e.displayName,action:"deleteCollection",context:{error:"CollectionRepository: Failed to delete collection",data:{collectionId:r}}}),new Error(Z);case 4:return[2]}}))}))()},e.getSpecificUserCollections=function(r,t){return(0,n.Z)((function(){var n,o,a,s,i;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,l.So.get("/api/users/".concat(r,"/user-collections"),{params:{username:r,page:t}})];case 1:return n=c.sent(),o=n.data,a=o.response,s=o.more,[2,{collections:f.ZP.fromApiDataList(a),hasMore:s}];case 2:throw i=c.sent(),d.Z.log({error:i,component:e.displayName,action:"getSpecificUserCollections"}),i;case 3:return[2]}}))}))()},e}();b.displayName="CollectionRepository"}}]);
//# sourceMappingURL=25398-179df49ed7c181bd.js.map