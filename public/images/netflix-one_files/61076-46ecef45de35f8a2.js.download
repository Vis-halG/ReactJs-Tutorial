"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61076],{53360:function(e,i,t){t.d(i,{E:function(){return g},a:function(){return p}});var n=t(7297),r=t(85893),o=t(67294),a=t(87379),s=t(58538);function l(){var e=(0,n.Z)(["\n  justify-content: center;\n  align-items: center;\n  color: ",";\n  padding: 0.125rem 0.5rem;\n  border: 0.5px solid ",";\n  border-radius: 0.125rem;\n"]);return l=function(){return e},e}function d(){var e=(0,n.Z)(["\n  display: flex;\n  align-items: center;\n"]);return d=function(){return e},e}function c(){var e=(0,n.Z)(["\n  img {\n    height: 1.25rem;\n    width: 1.25rem;\n    flex-shrink: 0;\n  }\n  ","\n"]);return c=function(){return e},e}var u=a.ZP.span.withConfig({componentId:"sc-4052c661-0"})(l(),s.wL.dark.contentsSecondary,s.wL.dark.contentsSecondary),v=a.ZP.div.withConfig({componentId:"sc-4052c661-1"})(d());function p(e){var i=e.className,t=e.rating,n=e.imageUrl,a=(0,o.useState)(!!n),s=a[0],l=a[1];return t||n?(0,r.jsx)(v,{className:i,children:s?(0,r.jsx)("img",{"data-testid":"content-rating-image",src:n,alt:t,onError:function(){l(!1)}}):(0,r.jsx)(u,{children:t})}):null}var g=(0,a.ZP)(p).withConfig({componentId:"sc-4052c661-2"})(c(),s.ZT.xxsPlain)},8615:function(e,i,t){t.d(i,{C:function(){return c},Z:function(){return n}});var n,r=t(51438),o=t(52951),a=t(37493),s=t(91177),l=t(538),d=t(66304);!function(e){e.Episode="episode",e.Movie="movie",e.Trailer="trailer",e.Clip="clip"}(n||(n={}));var c=function(){function e(i){(0,r.Z)(this,e),this.id=i.id,this.type=i.type,this.duration=i.duration,this.originLanguage=i.originLanguage,this.titles=i.titles,this.descriptions=i.descriptions,this.posterImage=i.posterImage,this.webUrl=i.webUrl,this.likeCount=i.likeCount,this.pgRating=i.pgRating,this.isBlocked=i.isBlocked,this.isGeoBlocked=i.isGeoBlocked,this.isPaywallBlocked=i.isPaywallBlocked,this.isUpcomingBlocked=i.isUpcomingBlocked,this.airTime=i.airTime,this.container=i.container,this.subtitleCompletions=i.subtitleCompletions,this.episodeNumber=i.episodeNumber,this.verticals=i.verticals,this.upcomingVerticals=i.upcomingVerticals,this.tvod=i.tvod,this.createdAt=i.createdAt,this.contentDescriptors=i.contentDescriptors,this.contentRating=i.contentRating}return e.fromApiData=function(i){var t,n,r,o,c,u,v,p,g,m,h,f,k,_;if(!(null===i||void 0===i?void 0:i.id))return null;var y,w,b,Z,E,C,V,D,P,x,A,I,N,R=null===(t=i.images)||void 0===t||null===(n=t.poster)||void 0===n?void 0:n.url,B=null===(r=i.images)||void 0===r||null===(o=r.poster)||void 0===o?void 0:o.source;return new e({id:i.id,type:i.type,webUrl:null===(c=i.url)||void 0===c?void 0:c.web,titles:null!==(y=i.titles)&&void 0!==y?y:{},descriptions:null!==(w=i.descriptions)&&void 0!==w?w:{},posterImage:R&&null!==(b=s.Z.createPosterImage(R,B))&&void 0!==b?b:void 0,originLanguage:null===(u=i.origin)||void 0===u?void 0:u.language,duration:null!==(Z=i.duration)&&void 0!==Z?Z:0,likeCount:null!==(E=null===(v=i.likes)||void 0===v?void 0:v.count)&&void 0!==E?E:0,pgRating:i.rating,airTime:i.viki_air_time?new Date(1e3*i.viki_air_time):void 0,isBlocked:null!==(C=i.blocked)&&void 0!==C&&C,isGeoBlocked:null!==(V=null===(p=i.blocking)||void 0===p?void 0:p.geo)&&void 0!==V&&V,isPaywallBlocked:null!==(D=null===(g=i.blocking)||void 0===g?void 0:g.paywall)&&void 0!==D&&D,isUpcomingBlocked:null!==(P=null===(m=i.blocking)||void 0===m?void 0:m.upcoming)&&void 0!==P&&P,container:i.container&&null!==(x=a.ZP.fromApiData(i.container))&&void 0!==x?x:void 0,subtitleCompletions:i.subtitle_completions,episodeNumber:i.number,verticals:i.verticals&&null!==(A=d.ZP.fromApiDataList(i.verticals))&&void 0!==A?A:void 0,upcomingVerticals:i.upcoming_verticals&&null!==(I=d.ZP.fromApiDataList(i.upcoming_verticals))&&void 0!==I?I:void 0,tvod:(null===(h=i.tvod)||void 0===h?void 0:h.length)&&null!==(N=l.Z.fromApiData(i.tvod[0]))&&void 0!==N?N:void 0,createdAt:i.created_at?new Date(i.created_at):void 0,creditsMarker:i.credits_marker,contentRating:{rating:null===(f=i.content_rating)||void 0===f?void 0:f.rating,imageUrl:null===(k=i.content_rating)||void 0===k?void 0:k.image_url,rank:null===(_=i.content_rating)||void 0===_?void 0:_.rank},contentDescriptors:i.content_descriptors})},e.fromApiDataList=function(i){var t=[],n=!0,r=!1,o=void 0;try{for(var a,s=i[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,d=e.fromApiData(l);if(!d)return null;t.push(d)}}catch(c){r=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return t},(0,o.Z)(e,[{key:"durationInMinutes",get:function(){return this.duration&&0!==this.duration?Math.round(this.duration/60):0}}]),e}()},34780:function(e,i,t){t.d(i,{Z:function(){return y}});var n=t(47568),r=t(51438),o=t(52951),a=t(14924),s=t(26042),l=t(10092),d=t(8615),c=t(33092),u=t(89716),v=t(40781),p=t(75688),g=t(5909),m=t(41581),h="VideoRepositoryError_get_video_error",f="VideoRepositoryError_get_video_api_data_error",k="VideoRepositoryError_get_video_playback_error",_="VideoRepositoryError_undefined_video_id",y=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,null,[{key:"getVideoJson",value:function(e,i,t){return(0,n.Z)((function(){var n,r;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:n=t?(0,c.CQ)(t):{},r={headers:n,params:{}},i&&(r.auth=!0,r.params.token=i),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,c.hi.send("videos/".concat(e,".json"),r,t)];case 2:return[2,o.sent()];case 3:throw o.sent(),new Error(f);case 4:return[2]}}))}))()}},{key:"getVideo",value:function(e,i,t){return(0,n.Z)((function(){var n,r,o;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:n=t?(0,c.CQ)(t):{},r={headers:n,params:{}},i&&(r.auth=!0,r.params.token=i),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,c.hi.send("videos/".concat(e,".json"),r)];case 2:if(o=a.sent())return[2,d.C.fromApiData(o)];throw new Error(h);case 3:throw a.sent(),new Error(h);case 4:return[2]}}))}))()}},{key:"getVideoPlaybackData",value:function(i){var t=i.req,r=i.videoId,o=i.playerVersion,a=void 0===o?"25.12.02-15.7.1":o,d=i.videoType;return(0,n.Z)((function(){var i,n,o,h,f,y,w,b,Z,E;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(!r)throw u.Z.log({component:e.displayName,action:"getVideoPlaybackData",context:{videoId:r}}),new Error(_);l.label=1;case 1:return l.trys.push([1,3,,4]),i="/api/videos/".concat(r),(n=t?(0,c.CQ)(t):{})[m.Z.Requests.Headers.X_VIKI_APP_VER]=a,n["x-client-user-agent"]=navigator.userAgent,(o=g.Ax.get(g.hp.SESSION))&&(n["x-viki-as-id"]=o),h={method:"GET",url:i,headers:n,params:(0,s.Z)({},d&&{video_type:d})},[4,(0,c.So)(Object.assign({},h))];case 2:if(f=l.sent(),y=f.data,w=f.error)throw new Error(w);return[2,y];case 3:throw b=l.sent(),v.Z.getCommonError(b)!==p.H.NetworkError&&u.Z.log({error:b,component:e.displayName,action:"getVideoPlaybackData",context:{videoId:r,playerVersion:a,isServer:!!t}}),new Error(JSON.stringify({name:k,payload:null===b||void 0===b||null===(Z=b.response)||void 0===Z||null===(E=Z.data)||void 0===E?void 0:E.error}));case 4:return[2]}}))}))()}}]),e}();(0,a.Z)(y,"displayName","VideoRepository")}}]);
//# sourceMappingURL=61076-46ecef45de35f8a2.js.map